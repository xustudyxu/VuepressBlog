<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx è´Ÿè½½å‡è¡¡ | xustudyxu&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e1aa9d15d62220ec692a843c08c79000";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>        
    </script>
    <script src="https://fastly.jsdelivr.net/npm/twikoo@1.5.11/dist/twikoo.all.min.js"></script>
    <script href="./js/index.js" async="async"></script>
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp">
    <script charset="utf-8" href="./js/main.js"></script>
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="ä¸€èµ·å­¦ä¹ ç¼–ç¨‹!">
    <meta name="image" content="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.5kgql84ikx80.webp">
    <meta name="twitter:title" content="Nginx è´Ÿè½½å‡è¡¡">
    <meta name="twitter:description" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.5kgql84ikx80.webp">
    <meta name="twitter:url" content="https://frxcat.fun/studynotes/middleware/Nginx/Nginx_load_balancing.html">
    <meta name="twitter:site" content="@frxcat">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Nginx è´Ÿè½½å‡è¡¡">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.5kgql84ikx80.webp">
    <meta property="og:url" content="https://frxcat.fun/studynotes/middleware/Nginx/Nginx_load_balancing.html">
    <meta property="og:site_name" content="frxcat">
    <meta property="article:published_time" content="2022-08-03T16:21:27.000Z">
    <meta property="article:tag" content="Nginx">
    <meta itemprop="name" content="Nginx è´Ÿè½½å‡è¡¡">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.5kgql84ikx80.webp">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="baidu-site-verification" content="code-5aMKYEt9fV">
    <link rel="preload" href="/assets/css/0.styles.ac3b5246.css" as="style"><link rel="preload" href="/assets/js/app.e21ab9c9.js" as="script"><link rel="preload" href="/assets/js/4.cffb820d.js" as="script"><link rel="preload" href="/assets/js/3.383238d8.js" as="script"><link rel="preload" href="/assets/js/2.6525d697.js" as="script"><link rel="preload" href="/assets/js/317.b0922aa5.js" as="script"><link rel="preload" href="/assets/js/21.2df8275d.js" as="script"><link rel="preload" href="/assets/js/44.80524cab.js" as="script"><link rel="preload" href="/assets/js/26.19fe0195.js" as="script"><link rel="preload" href="/assets/js/27.70e16e58.js" as="script"><link rel="prefetch" href="/assets/js/1.576a778c.js"><link rel="prefetch" href="/assets/js/10.27dcdf5a.js"><link rel="prefetch" href="/assets/js/100.254b08f1.js"><link rel="prefetch" href="/assets/js/101.afba8d45.js"><link rel="prefetch" href="/assets/js/102.2241c524.js"><link rel="prefetch" href="/assets/js/103.f98ad8ac.js"><link rel="prefetch" href="/assets/js/104.24be037a.js"><link rel="prefetch" href="/assets/js/105.d868a06c.js"><link rel="prefetch" href="/assets/js/106.216e299c.js"><link rel="prefetch" href="/assets/js/107.f13c64c2.js"><link rel="prefetch" href="/assets/js/108.1f1951ab.js"><link rel="prefetch" href="/assets/js/109.ec910615.js"><link rel="prefetch" href="/assets/js/11.1ccab684.js"><link rel="prefetch" href="/assets/js/110.4908226b.js"><link rel="prefetch" href="/assets/js/111.68afb69c.js"><link rel="prefetch" href="/assets/js/112.409e0337.js"><link rel="prefetch" href="/assets/js/113.129fc31a.js"><link rel="prefetch" href="/assets/js/114.f75052ac.js"><link rel="prefetch" href="/assets/js/115.7add2d91.js"><link rel="prefetch" href="/assets/js/116.cfc85f7b.js"><link rel="prefetch" href="/assets/js/117.38c58c46.js"><link rel="prefetch" href="/assets/js/118.e4a2b28f.js"><link rel="prefetch" href="/assets/js/119.4f4320e5.js"><link rel="prefetch" href="/assets/js/12.f46cf189.js"><link rel="prefetch" href="/assets/js/120.300cf084.js"><link rel="prefetch" href="/assets/js/121.238fb90f.js"><link rel="prefetch" href="/assets/js/122.45cc63e2.js"><link rel="prefetch" href="/assets/js/123.229633c2.js"><link rel="prefetch" href="/assets/js/124.ab40ef0d.js"><link rel="prefetch" href="/assets/js/125.c5f4040b.js"><link rel="prefetch" href="/assets/js/126.7af8f36b.js"><link rel="prefetch" href="/assets/js/127.d2243f5e.js"><link rel="prefetch" href="/assets/js/128.e14a1882.js"><link rel="prefetch" href="/assets/js/129.1349949e.js"><link rel="prefetch" href="/assets/js/13.b8167f1e.js"><link rel="prefetch" href="/assets/js/130.c37172f2.js"><link rel="prefetch" href="/assets/js/131.ae9fe387.js"><link rel="prefetch" href="/assets/js/132.06e81015.js"><link rel="prefetch" href="/assets/js/133.9d309244.js"><link rel="prefetch" href="/assets/js/134.1fd27cc7.js"><link rel="prefetch" href="/assets/js/135.1c00e257.js"><link rel="prefetch" href="/assets/js/136.486cadf6.js"><link rel="prefetch" href="/assets/js/137.f39d2209.js"><link rel="prefetch" href="/assets/js/138.4608fac5.js"><link rel="prefetch" href="/assets/js/139.0720ad3b.js"><link rel="prefetch" href="/assets/js/14.9105b0e8.js"><link rel="prefetch" href="/assets/js/140.ebed2888.js"><link rel="prefetch" href="/assets/js/141.b1958398.js"><link rel="prefetch" href="/assets/js/142.8ad544cc.js"><link rel="prefetch" href="/assets/js/143.b77be7fc.js"><link rel="prefetch" href="/assets/js/144.1c571b5a.js"><link rel="prefetch" href="/assets/js/145.cc521768.js"><link rel="prefetch" href="/assets/js/146.b73bf723.js"><link rel="prefetch" href="/assets/js/147.b1423f67.js"><link rel="prefetch" href="/assets/js/148.7e1ab64d.js"><link rel="prefetch" href="/assets/js/149.cfc84665.js"><link rel="prefetch" href="/assets/js/15.2cade621.js"><link rel="prefetch" href="/assets/js/150.06cf74d0.js"><link rel="prefetch" href="/assets/js/151.bcc361a1.js"><link rel="prefetch" href="/assets/js/152.092b6cc5.js"><link rel="prefetch" href="/assets/js/153.2ad2f18f.js"><link rel="prefetch" href="/assets/js/154.cf9da0d2.js"><link rel="prefetch" href="/assets/js/155.c0e06e54.js"><link rel="prefetch" href="/assets/js/156.3dec07c3.js"><link rel="prefetch" href="/assets/js/157.314effac.js"><link rel="prefetch" href="/assets/js/158.83be7abd.js"><link rel="prefetch" href="/assets/js/159.f6f6f715.js"><link rel="prefetch" href="/assets/js/16.dc7d4fe1.js"><link rel="prefetch" href="/assets/js/160.546e3423.js"><link rel="prefetch" href="/assets/js/161.2cb06213.js"><link rel="prefetch" href="/assets/js/162.8bf347e2.js"><link rel="prefetch" href="/assets/js/163.2497fee1.js"><link rel="prefetch" href="/assets/js/164.ffb3b5db.js"><link rel="prefetch" href="/assets/js/165.cd73f83c.js"><link rel="prefetch" href="/assets/js/166.8e86ba61.js"><link rel="prefetch" href="/assets/js/167.e9dcc243.js"><link rel="prefetch" href="/assets/js/168.ac696a1e.js"><link rel="prefetch" href="/assets/js/169.358a9cea.js"><link rel="prefetch" href="/assets/js/17.40e8b55c.js"><link rel="prefetch" href="/assets/js/170.c53bacba.js"><link rel="prefetch" href="/assets/js/171.cad424bd.js"><link rel="prefetch" href="/assets/js/172.318f0add.js"><link rel="prefetch" href="/assets/js/173.13af0526.js"><link rel="prefetch" href="/assets/js/174.9ec130ea.js"><link rel="prefetch" href="/assets/js/175.5218fd04.js"><link rel="prefetch" href="/assets/js/176.2bb49475.js"><link rel="prefetch" href="/assets/js/177.dba27d20.js"><link rel="prefetch" href="/assets/js/178.10832e0a.js"><link rel="prefetch" href="/assets/js/179.3a683570.js"><link rel="prefetch" href="/assets/js/18.d850f9c7.js"><link rel="prefetch" href="/assets/js/180.f364ef76.js"><link rel="prefetch" href="/assets/js/181.2e8a6815.js"><link rel="prefetch" href="/assets/js/182.0f0fd786.js"><link rel="prefetch" href="/assets/js/183.91aec20f.js"><link rel="prefetch" href="/assets/js/184.9bb914ac.js"><link rel="prefetch" href="/assets/js/185.d4723b1b.js"><link rel="prefetch" href="/assets/js/186.981a2a10.js"><link rel="prefetch" href="/assets/js/187.df7b0a8c.js"><link rel="prefetch" href="/assets/js/188.d7f8de91.js"><link rel="prefetch" href="/assets/js/189.502ef02c.js"><link rel="prefetch" href="/assets/js/19.da5eb7ef.js"><link rel="prefetch" href="/assets/js/190.1e159903.js"><link rel="prefetch" href="/assets/js/191.4f054966.js"><link rel="prefetch" href="/assets/js/192.659be15c.js"><link rel="prefetch" href="/assets/js/193.c5aeebc3.js"><link rel="prefetch" href="/assets/js/194.3a8c464e.js"><link rel="prefetch" href="/assets/js/195.d89726f6.js"><link rel="prefetch" href="/assets/js/196.0439a175.js"><link rel="prefetch" href="/assets/js/197.6bf18095.js"><link rel="prefetch" href="/assets/js/198.af30af92.js"><link rel="prefetch" href="/assets/js/199.3269dba1.js"><link rel="prefetch" href="/assets/js/20.2b6df167.js"><link rel="prefetch" href="/assets/js/200.5323e998.js"><link rel="prefetch" href="/assets/js/201.2f7c86ce.js"><link rel="prefetch" href="/assets/js/202.3c8b4876.js"><link rel="prefetch" href="/assets/js/203.0a89bc22.js"><link rel="prefetch" href="/assets/js/204.240b22c3.js"><link rel="prefetch" href="/assets/js/205.1720eb23.js"><link rel="prefetch" href="/assets/js/206.6a4a1b41.js"><link rel="prefetch" href="/assets/js/207.efbe186e.js"><link rel="prefetch" href="/assets/js/208.156e89bf.js"><link rel="prefetch" href="/assets/js/209.60e02f0e.js"><link rel="prefetch" href="/assets/js/210.35655be8.js"><link rel="prefetch" href="/assets/js/211.082fc9f6.js"><link rel="prefetch" href="/assets/js/212.2f6580aa.js"><link rel="prefetch" href="/assets/js/213.31b84f6a.js"><link rel="prefetch" href="/assets/js/214.4598e3b0.js"><link rel="prefetch" href="/assets/js/215.37f7375d.js"><link rel="prefetch" href="/assets/js/216.4988d8b1.js"><link rel="prefetch" href="/assets/js/217.c1678ea2.js"><link rel="prefetch" href="/assets/js/218.2f751337.js"><link rel="prefetch" href="/assets/js/219.56c44a49.js"><link rel="prefetch" href="/assets/js/22.add948d5.js"><link rel="prefetch" href="/assets/js/220.6216ed2e.js"><link rel="prefetch" href="/assets/js/221.4a144772.js"><link rel="prefetch" href="/assets/js/222.3aa62012.js"><link rel="prefetch" href="/assets/js/223.25a2a498.js"><link rel="prefetch" href="/assets/js/224.84a6f72e.js"><link rel="prefetch" href="/assets/js/225.e712b56d.js"><link rel="prefetch" href="/assets/js/226.c2dc13b8.js"><link rel="prefetch" href="/assets/js/227.d4ab047b.js"><link rel="prefetch" href="/assets/js/228.e87b0ff2.js"><link rel="prefetch" href="/assets/js/229.e655ab60.js"><link rel="prefetch" href="/assets/js/23.26274dde.js"><link rel="prefetch" href="/assets/js/230.8a0dd833.js"><link rel="prefetch" href="/assets/js/231.daa457a5.js"><link rel="prefetch" href="/assets/js/232.41f4c5e3.js"><link rel="prefetch" href="/assets/js/233.ff6184b1.js"><link rel="prefetch" href="/assets/js/234.cc5b1598.js"><link rel="prefetch" href="/assets/js/235.f5bc7c1c.js"><link rel="prefetch" href="/assets/js/236.5f1a1294.js"><link rel="prefetch" href="/assets/js/237.809381ae.js"><link rel="prefetch" href="/assets/js/238.0a768844.js"><link rel="prefetch" href="/assets/js/239.66931843.js"><link rel="prefetch" href="/assets/js/24.395cd3a7.js"><link rel="prefetch" href="/assets/js/240.a1a7d111.js"><link rel="prefetch" href="/assets/js/241.ce7392e5.js"><link rel="prefetch" href="/assets/js/242.f9a357cc.js"><link rel="prefetch" href="/assets/js/243.7fbd4687.js"><link rel="prefetch" href="/assets/js/244.aeb8b4e6.js"><link rel="prefetch" href="/assets/js/245.6450e6cf.js"><link rel="prefetch" href="/assets/js/246.2b75d40c.js"><link rel="prefetch" href="/assets/js/247.9d1ac25a.js"><link rel="prefetch" href="/assets/js/248.d0f18be0.js"><link rel="prefetch" href="/assets/js/249.d3fdb2b0.js"><link rel="prefetch" href="/assets/js/25.fa9c0ed1.js"><link rel="prefetch" href="/assets/js/250.9b491007.js"><link rel="prefetch" href="/assets/js/251.03964b04.js"><link rel="prefetch" href="/assets/js/252.4f60fe87.js"><link rel="prefetch" href="/assets/js/253.515f7632.js"><link rel="prefetch" href="/assets/js/254.7d0073e2.js"><link rel="prefetch" href="/assets/js/255.ac320089.js"><link rel="prefetch" href="/assets/js/256.8e668496.js"><link rel="prefetch" href="/assets/js/257.6dfc847d.js"><link rel="prefetch" href="/assets/js/258.bc1d94b2.js"><link rel="prefetch" href="/assets/js/259.3e5d89dd.js"><link rel="prefetch" href="/assets/js/260.ccee906a.js"><link rel="prefetch" href="/assets/js/261.15cac58f.js"><link rel="prefetch" href="/assets/js/262.744f2b83.js"><link rel="prefetch" href="/assets/js/263.4f3eff51.js"><link rel="prefetch" href="/assets/js/264.d0738835.js"><link rel="prefetch" href="/assets/js/265.11648194.js"><link rel="prefetch" href="/assets/js/266.bd779deb.js"><link rel="prefetch" href="/assets/js/267.87c31534.js"><link rel="prefetch" href="/assets/js/268.003bd446.js"><link rel="prefetch" href="/assets/js/269.b3ae13c9.js"><link rel="prefetch" href="/assets/js/270.c53b55e6.js"><link rel="prefetch" href="/assets/js/271.f6bbca2b.js"><link rel="prefetch" href="/assets/js/272.2430054b.js"><link rel="prefetch" href="/assets/js/273.3ecd048c.js"><link rel="prefetch" href="/assets/js/274.ec0558eb.js"><link rel="prefetch" href="/assets/js/275.07e1b394.js"><link rel="prefetch" href="/assets/js/276.e149d465.js"><link rel="prefetch" href="/assets/js/277.dd273960.js"><link rel="prefetch" href="/assets/js/278.f01bd139.js"><link rel="prefetch" href="/assets/js/279.5c5c947b.js"><link rel="prefetch" href="/assets/js/28.f3728152.js"><link rel="prefetch" href="/assets/js/280.dff73ba2.js"><link rel="prefetch" href="/assets/js/281.37647dcf.js"><link rel="prefetch" href="/assets/js/282.e6f145ca.js"><link rel="prefetch" href="/assets/js/283.7f4702d4.js"><link rel="prefetch" href="/assets/js/284.b0e21fa7.js"><link rel="prefetch" href="/assets/js/285.51c1a114.js"><link rel="prefetch" href="/assets/js/286.af9aa612.js"><link rel="prefetch" href="/assets/js/287.ecfc61c8.js"><link rel="prefetch" href="/assets/js/288.3940809b.js"><link rel="prefetch" href="/assets/js/289.5d6749a9.js"><link rel="prefetch" href="/assets/js/29.e4a4a710.js"><link rel="prefetch" href="/assets/js/290.f5ca1f64.js"><link rel="prefetch" href="/assets/js/291.72e6da6f.js"><link rel="prefetch" href="/assets/js/292.71ecbcff.js"><link rel="prefetch" href="/assets/js/293.1975007d.js"><link rel="prefetch" href="/assets/js/294.388f4cc5.js"><link rel="prefetch" href="/assets/js/295.4738c4de.js"><link rel="prefetch" href="/assets/js/296.ed974d99.js"><link rel="prefetch" href="/assets/js/297.af246ab7.js"><link rel="prefetch" href="/assets/js/298.17531d57.js"><link rel="prefetch" href="/assets/js/299.165b94f3.js"><link rel="prefetch" href="/assets/js/30.cea38239.js"><link rel="prefetch" href="/assets/js/300.85576122.js"><link rel="prefetch" href="/assets/js/301.ede9785c.js"><link rel="prefetch" href="/assets/js/302.7c187537.js"><link rel="prefetch" href="/assets/js/303.0d0fc734.js"><link rel="prefetch" href="/assets/js/304.287f661f.js"><link rel="prefetch" href="/assets/js/305.414c3009.js"><link rel="prefetch" href="/assets/js/306.c728acd1.js"><link rel="prefetch" href="/assets/js/307.5b5a8705.js"><link rel="prefetch" href="/assets/js/308.c1d27d1a.js"><link rel="prefetch" href="/assets/js/309.fb999188.js"><link rel="prefetch" href="/assets/js/31.c155409c.js"><link rel="prefetch" href="/assets/js/310.deeff3fc.js"><link rel="prefetch" href="/assets/js/311.52859e36.js"><link rel="prefetch" href="/assets/js/312.c781b68e.js"><link rel="prefetch" href="/assets/js/313.5044d492.js"><link rel="prefetch" href="/assets/js/314.55e97aac.js"><link rel="prefetch" href="/assets/js/315.3dd63f22.js"><link rel="prefetch" href="/assets/js/316.10adb30f.js"><link rel="prefetch" href="/assets/js/318.6c408d48.js"><link rel="prefetch" href="/assets/js/319.de300c6f.js"><link rel="prefetch" href="/assets/js/32.bfcc2180.js"><link rel="prefetch" href="/assets/js/320.acef44cd.js"><link rel="prefetch" href="/assets/js/321.b7be2062.js"><link rel="prefetch" href="/assets/js/322.898f446d.js"><link rel="prefetch" href="/assets/js/323.c7522a3d.js"><link rel="prefetch" href="/assets/js/324.bcde5b5b.js"><link rel="prefetch" href="/assets/js/325.18fa3e6c.js"><link rel="prefetch" href="/assets/js/326.ad12fa09.js"><link rel="prefetch" href="/assets/js/327.c3bcf442.js"><link rel="prefetch" href="/assets/js/328.80b09823.js"><link rel="prefetch" href="/assets/js/329.d63b3c57.js"><link rel="prefetch" href="/assets/js/33.ac883c9b.js"><link rel="prefetch" href="/assets/js/330.a7e2c3f2.js"><link rel="prefetch" href="/assets/js/331.e295bf4c.js"><link rel="prefetch" href="/assets/js/332.cf3aa6b1.js"><link rel="prefetch" href="/assets/js/333.5f6f9d35.js"><link rel="prefetch" href="/assets/js/334.056259d8.js"><link rel="prefetch" href="/assets/js/335.1b94fc7e.js"><link rel="prefetch" href="/assets/js/336.9a66af20.js"><link rel="prefetch" href="/assets/js/337.11dbb37a.js"><link rel="prefetch" href="/assets/js/338.8c8d8721.js"><link rel="prefetch" href="/assets/js/339.5e94443c.js"><link rel="prefetch" href="/assets/js/34.1d7cb09f.js"><link rel="prefetch" href="/assets/js/340.2af3b0e2.js"><link rel="prefetch" href="/assets/js/341.b025f3d0.js"><link rel="prefetch" href="/assets/js/342.8cc08370.js"><link rel="prefetch" href="/assets/js/343.1fa5c508.js"><link rel="prefetch" href="/assets/js/344.0adf0161.js"><link rel="prefetch" href="/assets/js/345.896ba5db.js"><link rel="prefetch" href="/assets/js/346.ba9dee10.js"><link rel="prefetch" href="/assets/js/347.82341fea.js"><link rel="prefetch" href="/assets/js/348.df517e1a.js"><link rel="prefetch" href="/assets/js/349.9ee67f65.js"><link rel="prefetch" href="/assets/js/35.927544c0.js"><link rel="prefetch" href="/assets/js/350.7d6f0d9b.js"><link rel="prefetch" href="/assets/js/351.930c20f1.js"><link rel="prefetch" href="/assets/js/352.07478b45.js"><link rel="prefetch" href="/assets/js/353.c7237376.js"><link rel="prefetch" href="/assets/js/354.aa1e7e46.js"><link rel="prefetch" href="/assets/js/355.e42b4d87.js"><link rel="prefetch" href="/assets/js/356.615849d2.js"><link rel="prefetch" href="/assets/js/357.204bb8a0.js"><link rel="prefetch" href="/assets/js/358.548d8370.js"><link rel="prefetch" href="/assets/js/359.d0d9e329.js"><link rel="prefetch" href="/assets/js/36.bfd38047.js"><link rel="prefetch" href="/assets/js/360.37b023c5.js"><link rel="prefetch" href="/assets/js/361.a52f9a48.js"><link rel="prefetch" href="/assets/js/362.59be3e7b.js"><link rel="prefetch" href="/assets/js/363.97b29abb.js"><link rel="prefetch" href="/assets/js/364.3bf85273.js"><link rel="prefetch" href="/assets/js/365.3954c35a.js"><link rel="prefetch" href="/assets/js/366.f021f9a7.js"><link rel="prefetch" href="/assets/js/367.a36168c5.js"><link rel="prefetch" href="/assets/js/368.4f80ff67.js"><link rel="prefetch" href="/assets/js/369.4f3bf77c.js"><link rel="prefetch" href="/assets/js/37.b175d140.js"><link rel="prefetch" href="/assets/js/370.79303a1c.js"><link rel="prefetch" href="/assets/js/371.0d866982.js"><link rel="prefetch" href="/assets/js/372.0be22c97.js"><link rel="prefetch" href="/assets/js/38.aee29788.js"><link rel="prefetch" href="/assets/js/39.38278178.js"><link rel="prefetch" href="/assets/js/40.004676b2.js"><link rel="prefetch" href="/assets/js/41.0ac40c52.js"><link rel="prefetch" href="/assets/js/42.777eb944.js"><link rel="prefetch" href="/assets/js/43.e00277f5.js"><link rel="prefetch" href="/assets/js/45.f50d77f1.js"><link rel="prefetch" href="/assets/js/46.706da847.js"><link rel="prefetch" href="/assets/js/47.c1fab7c3.js"><link rel="prefetch" href="/assets/js/48.3775aafe.js"><link rel="prefetch" href="/assets/js/49.18773eb9.js"><link rel="prefetch" href="/assets/js/5.08610ee8.js"><link rel="prefetch" href="/assets/js/50.62e473cd.js"><link rel="prefetch" href="/assets/js/51.80e7e947.js"><link rel="prefetch" href="/assets/js/52.2e307087.js"><link rel="prefetch" href="/assets/js/53.c8c107af.js"><link rel="prefetch" href="/assets/js/54.8cb6bbac.js"><link rel="prefetch" href="/assets/js/55.8f400031.js"><link rel="prefetch" href="/assets/js/56.86615e60.js"><link rel="prefetch" href="/assets/js/57.23a308f5.js"><link rel="prefetch" href="/assets/js/58.475717ee.js"><link rel="prefetch" href="/assets/js/59.78a34bb1.js"><link rel="prefetch" href="/assets/js/6.a688d07f.js"><link rel="prefetch" href="/assets/js/60.8c7e9b1f.js"><link rel="prefetch" href="/assets/js/61.4d405b4a.js"><link rel="prefetch" href="/assets/js/62.12603e6a.js"><link rel="prefetch" href="/assets/js/63.7eadd5b0.js"><link rel="prefetch" href="/assets/js/64.1e0f7985.js"><link rel="prefetch" href="/assets/js/65.4bb46ec0.js"><link rel="prefetch" href="/assets/js/66.058fed8d.js"><link rel="prefetch" href="/assets/js/67.ba1fc3b0.js"><link rel="prefetch" href="/assets/js/68.f3ae6d2d.js"><link rel="prefetch" href="/assets/js/69.524d01cb.js"><link rel="prefetch" href="/assets/js/7.a79e8853.js"><link rel="prefetch" href="/assets/js/70.1ca51df0.js"><link rel="prefetch" href="/assets/js/71.4a37fa4b.js"><link rel="prefetch" href="/assets/js/72.40b97d66.js"><link rel="prefetch" href="/assets/js/73.93ececb2.js"><link rel="prefetch" href="/assets/js/74.32e6dcfc.js"><link rel="prefetch" href="/assets/js/75.1476982a.js"><link rel="prefetch" href="/assets/js/76.2922e0d9.js"><link rel="prefetch" href="/assets/js/77.011ad7dd.js"><link rel="prefetch" href="/assets/js/78.a7e35e81.js"><link rel="prefetch" href="/assets/js/79.bc572443.js"><link rel="prefetch" href="/assets/js/80.453e1e49.js"><link rel="prefetch" href="/assets/js/81.0e38d9c0.js"><link rel="prefetch" href="/assets/js/82.b667bbb8.js"><link rel="prefetch" href="/assets/js/83.7311d47a.js"><link rel="prefetch" href="/assets/js/84.ad37e953.js"><link rel="prefetch" href="/assets/js/85.a4e096c9.js"><link rel="prefetch" href="/assets/js/86.aaf9385d.js"><link rel="prefetch" href="/assets/js/87.7c2d4fdd.js"><link rel="prefetch" href="/assets/js/88.d405fb1d.js"><link rel="prefetch" href="/assets/js/89.1a22bc61.js"><link rel="prefetch" href="/assets/js/90.2a36fe0a.js"><link rel="prefetch" href="/assets/js/91.2094bc2d.js"><link rel="prefetch" href="/assets/js/92.59032c2a.js"><link rel="prefetch" href="/assets/js/93.c04730a6.js"><link rel="prefetch" href="/assets/js/94.63bcc45f.js"><link rel="prefetch" href="/assets/js/95.1bb20dab.js"><link rel="prefetch" href="/assets/js/96.57821c11.js"><link rel="prefetch" href="/assets/js/97.5a091690.js"><link rel="prefetch" href="/assets/js/98.1ab416b7.js"><link rel="prefetch" href="/assets/js/99.40e34550.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5ad4acaa.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ac3b5246.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">xustudyxu's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µâ€‹</a></div><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">å¯¼èˆªğŸš€â€‹</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è®¡ç®—æœºæ ¸å¿ƒ" class="dropdown-title"><!----> <span class="title" style="display:;">è®¡ç®—æœºæ ¸å¿ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/db72cf/" class="nav-link">æ•°æ®ç»“æ„</a></li><li class="dropdown-item"><!----> <a href="/pages/39e2a1/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>JavaåŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cda88/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/cea341/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/d893c0/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/6f762f/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Springç”Ÿæ€" class="dropdown-title"><!----> <span class="title" style="display:;">Springç”Ÿæ€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/66babb/" class="nav-link">SpringSecurity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸­é—´ä»¶" class="dropdown-title"><!----> <span class="title" style="display:;">ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>æœç´¢å¼•æ“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>æ¶ˆæ¯é˜Ÿåˆ—</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>æœåŠ¡å™¨</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">NginxğŸŒ</a></li></ul></li><li class="dropdown-item"><h4>æœåŠ¡æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¤§æ•°æ®" class="dropdown-title"><!----> <span class="title" style="display:;">å¤§æ•°æ®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">PythonåŸºç¡€</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">æ•°æ®åˆ†æ</a></li></ul></li><li class="dropdown-item"><h4>ç¯å¢ƒæ­å»º</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoopé›†ç¾¤</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVMè™šæ‹ŸåŒ–æŠ€æœ¯</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><!----> <span class="title" style="display:;">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e72480/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQLæ•°æ®åº“æ¦‚è®º</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·" class="dropdown-title"><!----> <span class="title" style="display:;">å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>éƒ¨ç½²</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/90cc29/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>ç®¡ç†</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/pages/34892c/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•" class="dropdown-title"><!----> <span class="title" style="display:;">é¢è¯•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/eab19d/" class="nav-link">åå¤§æ’åºç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">åŠ›æ‰£ç®—æ³•é¢˜</a></li><li class="dropdown-item"><!----> <a href="/pages/39558d/" class="nav-link">åˆçº§å¼€å‘ç¯‡</a></li><li class="dropdown-item"><!----> <a href="/pages/47c622/" class="nav-link">ä¸­é«˜è¿›é˜¶ç¯‡</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><!----> <span class="title" style="display:;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li><li class="dropdown-item"><!----> <a href="/pages/bba350/" class="nav-link">ä¼˜ç§€åšå®¢æ–‡ç« </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æœ¬ç«™" class="dropdown-title"><!----> <span class="title" style="display:;">æœ¬ç«™</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ç´¢å¼•</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">å…³äº</a></li></ul></li></ul></div></div> <a href="https://github.com/xustudyxu/xustudyxu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    æŸ¥çœ‹æºç 
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp"> <div class="blogger-info"><h3>xustudyxu</h3> <span>ä¸€èµ·å­¦ä¹ ç¼–ç¨‹!</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µâ€‹</a></div><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">å¯¼èˆªğŸš€â€‹</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è®¡ç®—æœºæ ¸å¿ƒ" class="dropdown-title"><!----> <span class="title" style="display:;">è®¡ç®—æœºæ ¸å¿ƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/db72cf/" class="nav-link">æ•°æ®ç»“æ„</a></li><li class="dropdown-item"><!----> <a href="/pages/39e2a1/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>JavaåŸºç¡€</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cda88/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/cea341/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/d893c0/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/6f762f/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Springç”Ÿæ€" class="dropdown-title"><!----> <span class="title" style="display:;">Springç”Ÿæ€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/66babb/" class="nav-link">SpringSecurity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸­é—´ä»¶" class="dropdown-title"><!----> <span class="title" style="display:;">ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>æœç´¢å¼•æ“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>æ¶ˆæ¯é˜Ÿåˆ—</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>æœåŠ¡å™¨</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">NginxğŸŒ</a></li></ul></li><li class="dropdown-item"><h4>æœåŠ¡æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¤§æ•°æ®" class="dropdown-title"><!----> <span class="title" style="display:;">å¤§æ•°æ®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">PythonåŸºç¡€</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">æ•°æ®åˆ†æ</a></li></ul></li><li class="dropdown-item"><h4>ç¯å¢ƒæ­å»º</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoopé›†ç¾¤</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVMè™šæ‹ŸåŒ–æŠ€æœ¯</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><!----> <span class="title" style="display:;">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e72480/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQLæ•°æ®åº“æ¦‚è®º</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>æ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·" class="dropdown-title"><!----> <span class="title" style="display:;">å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>éƒ¨ç½²</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/90cc29/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>ç®¡ç†</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/pages/34892c/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•" class="dropdown-title"><!----> <span class="title" style="display:;">é¢è¯•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/eab19d/" class="nav-link">åå¤§æ’åºç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">åŠ›æ‰£ç®—æ³•é¢˜</a></li><li class="dropdown-item"><!----> <a href="/pages/39558d/" class="nav-link">åˆçº§å¼€å‘ç¯‡</a></li><li class="dropdown-item"><!----> <a href="/pages/47c622/" class="nav-link">ä¸­é«˜è¿›é˜¶ç¯‡</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><!----> <span class="title" style="display:;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li><li class="dropdown-item"><!----> <a href="/pages/bba350/" class="nav-link">ä¼˜ç§€åšå®¢æ–‡ç« </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æœ¬ç«™" class="dropdown-title"><!----> <span class="title" style="display:;">æœ¬ç«™</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ç´¢å¼•</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">å…³äº</a></li></ul></li></ul></div></div> <a href="https://github.com/xustudyxu/xustudyxu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    æŸ¥çœ‹æºç 
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æœç´¢å¼•æ“-ElasticSearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/596552/" class="sidebar-link">ElasticSearch æ¦‚è¿°</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_install/" class="sidebar-link">ElasticSearch å®‰è£…</a></li><li><a href="/middleware/ElasticSearch/basic_operation/" class="sidebar-link">ElasticSearch åŸºæœ¬æ“ä½œ</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Advanced_operation/" class="sidebar-link">ElasticSearch  é«˜çº§æ“ä½œ</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Java/" class="sidebar-link">ElasticSearch Javaæ•´åˆ</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_buildcluster/" class="sidebar-link">ElasticSearch é›†ç¾¤æ­å»º</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Gainian/" class="sidebar-link">ElasticSearch è¿›é˜¶</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Distributed_clusterAndRouting_calculation/" class="sidebar-link">ElasticSearch åˆ†å¸ƒå¼é›†ç¾¤å’Œè·¯ç”±è®¡ç®—</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Slice_control_process/" class="sidebar-link">ElasticSearch åˆ†ç‰‡æ§åˆ¶æµç¨‹</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Slicing_operation_principle/" class="sidebar-link">ElasticSearch åˆ†ç‰‡æ“ä½œåŸç†</a></li><li><a href="/pages/c6a02d/" class="sidebar-link">ElasticSearch å¤šç§åˆ†æå™¨</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Conflict_problem_handling/" class="sidebar-link">ElasticSearch å†²çªé—®é¢˜å¤„ç†</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Framework_integration/" class="sidebar-link">ElasticSearch å¤šæ¡†æ¶é›†æˆ</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_optimization/" class="sidebar-link">ElasticSearch è¿›é˜¶ä¼˜åŒ–</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Interview_questions/" class="sidebar-link">ElasticSearch é¢è¯•é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ¶ˆæ¯é˜Ÿåˆ—-RabbitMQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e645d9/" class="sidebar-link">MQçš„ç›¸å…³æ¦‚å¿µ</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_introduct/" class="sidebar-link">RabbitMQ ä»‹ç»</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_install/" class="sidebar-link">RabbitMQ å®‰è£…</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_index/" class="sidebar-link">RabbitMQ å…¥é—¨æ¡ˆä¾‹</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Message_responseAndrelease/" class="sidebar-link">RabbitMQ æ¶ˆæ¯åº”ç­”ä¸å‘å¸ƒ</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Exchanges/" class="sidebar-link">RabbitMQ äº¤æ¢æœº</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Dead_QUEUE/" class="sidebar-link">RabbitMQ æ­»ä¿¡é˜Ÿåˆ—</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Delay_queue/" class="sidebar-link">RabbitMQ å»¶è¿Ÿé˜Ÿåˆ—</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Release_confirmation_advanced/" class="sidebar-link">RabbitMQ å‘å¸ƒç¡®è®¤é«˜çº§</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Other_knowledge_points/" class="sidebar-link">RabbitMQ å…¶ä»–çŸ¥è¯†ç‚¹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æœåŠ¡å™¨-Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9551ee/" class="sidebar-link">Nginx ä»‹ç»</a></li><li><a href="/middleware/Nginx/Nginx_install/" class="sidebar-link">Nginx å®‰è£…</a></li><li><a href="/middleware/Nginx/Nginx_Base_Use/" class="sidebar-link">Nginx åŸºæœ¬ä½¿ç”¨</a></li><li><a href="/middleware/Nginx/Nginx_Configuration_file/" class="sidebar-link">Nginx æ ¸å¿ƒé…ç½®æ–‡ä»¶</a></li><li><a href="/middleware/Nginx/Nginx_Basic_case_configuration/" class="sidebar-link">Nginx åŸºç¡€é…ç½®å®ä¾‹</a></li><li><a href="/middleware/Nginx/Nginx_Static_resource_deployment/" class="sidebar-link">Nginx é™æ€èµ„æºéƒ¨ç½²</a></li><li><a href="/middleware/Nginx/NginxStatic_resource_access/" class="sidebar-link">Nginx é™æ€èµ„æºè®¿é—®</a></li><li><a href="/middleware/Nginx/Nginx_Reverse_proxy/" class="sidebar-link">Nginx åå‘ä»£ç†</a></li><li><a href="/middleware/Nginx/Nginx_load_balancing/" aria-current="page" class="active sidebar-link">Nginx è´Ÿè½½å‡è¡¡</a></li><li><a href="/middleware/Nginx/Nginx_Cache_integration/" class="sidebar-link">Nginx ç¼“å­˜é›†æˆ</a></li><li><a href="/middleware/Nginx/Nginx_Deployment_and_cluster/" class="sidebar-link">Nginx éƒ¨ç½²ä¸é›†ç¾¤</a></li><li><a href="/middleware/Nginx/Nginx_Site_and_certification/" class="sidebar-link">Nginx ç«™ç‚¹ä¸è®¤è¯</a></li><li><a href="/middleware/Nginx/Nginx_Lua_learn/" class="sidebar-link">Nginx Luaå­¦ä¹ </a></li><li><a href="/middleware/Nginx/Nginx_Lua_Expansion_module/" class="sidebar-link">Nginx Luaæ‰©å±•æ¨¡å—</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æœåŠ¡æ¡†æ¶-Dubbo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/48771f/" class="sidebar-link">Dubbo æ¦‚è¿°</a></li><li><a href="/middleware/Dubbo/Dubbo_Geting_start/" class="sidebar-link">Dubbo å¿«é€Ÿå…¥é—¨</a></li><li><a href="/middleware/Dubbo/Dubbo_Advanced_features/" class="sidebar-link">Dubbo é«˜çº§ç‰¹æ€§</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=studynotes" title="åˆ†ç±»" data-v-06225672>studynotes</a></li><li data-v-06225672><a href="/categories/?category=middleware" title="åˆ†ç±»" data-v-06225672>middleware</a></li><li data-v-06225672><a href="/categories/?category=Nginx" title="åˆ†ç±»" data-v-06225672>Nginx</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>xu</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-03</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Nginx è´Ÿè½½å‡è¡¡<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="nginx-è´Ÿè½½å‡è¡¡"><a href="#nginx-è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> Nginx è´Ÿè½½å‡è¡¡</h1> <div class="custom-block tip"><p class="custom-block-title">è´Ÿè½½å‡è¡¡</p> <p>è´Ÿè½½å‡è¡¡æ˜¯å®é™…å¼€å‘å¿…é¡»æŒæ¡çš„æŠ€èƒ½ï¼ŒNginx å¦‚ä½•å°†å°‘æ•°è¯·æ±‚è·Ÿå¤šå°æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€šï¼Œè®©æ¯ä¸€å°æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†é¢é¢ä¿±åˆ°ï¼Ÿæœ¬å†…å®¹å°†å­¦ä¹  Nginx çš„è´Ÿè½½å‡è¡¡çŸ¥è¯†ã€‚</p></div> <p></p><div class="table-of-contents"><ul><li><a href="#è´Ÿè½½å‡è¡¡æ¦‚è¿°">è´Ÿè½½å‡è¡¡æ¦‚è¿°</a></li><li><a href="#è´Ÿè½½å‡è¡¡åŸç†åŠå¤„ç†æµç¨‹">è´Ÿè½½å‡è¡¡åŸç†åŠå¤„ç†æµç¨‹</a><ul><li><a href="#è´Ÿè½½å‡è¡¡ä½œç”¨">è´Ÿè½½å‡è¡¡ä½œç”¨</a></li></ul></li><li><a href="#è´Ÿè½½å‡è¡¡å¸¸ç”¨å¤„ç†æ–¹å¼">è´Ÿè½½å‡è¡¡å¸¸ç”¨å¤„ç†æ–¹å¼</a><ul><li><a href="#ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©">ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©</a></li><li><a href="#dnsè½®è¯¢æ–¹å¼">DNSè½®è¯¢æ–¹å¼</a></li><li><a href="#å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡">å››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡</a></li></ul></li><li><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡">ä¸ƒå±‚è´Ÿè½½å‡è¡¡</a><ul><li><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤">ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤</a></li><li><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤æ¡ˆä¾‹">ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤æ¡ˆä¾‹</a></li><li><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡çŠ¶æ€">ä¸ƒå±‚è´Ÿè½½å‡è¡¡çŠ¶æ€</a></li><li><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥">ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥</a></li><li><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡æ¡ˆä¾‹">ä¸ƒå±‚è´Ÿè½½å‡è¡¡æ¡ˆä¾‹</a></li></ul></li><li><a href="#å››å±‚è´Ÿè½½å‡è¡¡">å››å±‚è´Ÿè½½å‡è¡¡</a><ul><li><a href="#æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ">æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ</a></li><li><a href="#å››å±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤">å››å±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤</a></li><li><a href="#å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹">å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹</a></li></ul></li></ul></div><p></p> <h2 id="è´Ÿè½½å‡è¡¡æ¦‚è¿°"><a href="#è´Ÿè½½å‡è¡¡æ¦‚è¿°" class="header-anchor">#</a> è´Ÿè½½å‡è¡¡æ¦‚è¿°</h2> <p>æ—©æœŸçš„ç½‘ç«™æµé‡å’Œä¸šåŠ¡åŠŸèƒ½éƒ½æ¯”è¾ƒç®€å•ï¼Œå•å°æœåŠ¡å™¨è¶³ä»¥æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†æ˜¯éšç€äº’è”ç½‘çš„å‘å±•ï¼Œä¸šåŠ¡æµé‡è¶Šæ¥è¶Šå¤§å¹¶ä¸”ä¸šåŠ¡é€»è¾‘ä¹Ÿè·Ÿç€è¶Šæ¥è¶Šå¤æ‚ï¼Œå•å°æœåŠ¡å™¨çš„æ€§èƒ½åŠå•ç‚¹æ•…éšœé—®é¢˜å°±å‡¸æ˜¾å‡ºæ¥äº†ï¼Œå› æ­¤éœ€è¦å¤šå°æœåŠ¡å™¨è¿›è¡Œæ€§èƒ½çš„æ°´å¹³æ‰©å±•åŠé¿å…å•ç‚¹æ•…éšœå‡ºç°ã€‚é‚£ä¹ˆå¦‚ä½•å°†ä¸åŒç”¨æˆ·çš„è¯·æ±‚æµé‡åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šå‘¢ï¼Ÿè¿™å°±éœ€è¦è´Ÿè½½å‡è¡¡æ¥å¤„ç†ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.5kgql84ikx80.webp" alt="image"></p> <h2 id="è´Ÿè½½å‡è¡¡åŸç†åŠå¤„ç†æµç¨‹"><a href="#è´Ÿè½½å‡è¡¡åŸç†åŠå¤„ç†æµç¨‹" class="header-anchor">#</a> è´Ÿè½½å‡è¡¡åŸç†åŠå¤„ç†æµç¨‹</h2> <p>ç³»ç»Ÿçš„æ‰©å±•å¯ä»¥åˆ†ä¸ºçºµå‘æ‰©å±•å’Œæ¨ªå‘æ‰©å±•ã€‚</p> <ul><li>çºµå‘æ‰©å±•æ˜¯ä»å•æœºçš„è§’åº¦å‡ºå‘ï¼Œé€šè¿‡å¢åŠ ç³»ç»Ÿçš„ç¡¬ä»¶å¤„ç†èƒ½åŠ›æ¥æå‡æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›</li> <li>æ¨ªå‘æ‰©å±•æ˜¯é€šè¿‡æ·»åŠ æœºå™¨æ¥æ»¡è¶³å¤§å‹ç½‘ç«™æœåŠ¡çš„å¤„ç†èƒ½åŠ›</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.1xwd1pm6du68.webp" alt="image"></p> <p>å¦‚ä¸Šå›¾ï¼Œè´Ÿè½½å‡è¡¡æ¶‰åŠåˆ°ä¸¤ä¸ªé‡è¦çš„è§’è‰²åˆ†åˆ«æ˜¯ã€Œåº”ç”¨é›†ç¾¤ã€å’Œã€Œè´Ÿè½½å‡è¡¡å™¨ã€ã€‚</p> <ul><li>åº”ç”¨é›†ç¾¤ï¼šå°†åŒä¸€åº”ç”¨éƒ¨ç½²åˆ°å¤šå°æœºå™¨ä¸Šï¼Œç»„æˆå¤„ç†é›†ç¾¤ï¼Œæ¥æ”¶è´Ÿè½½å‡è¡¡è®¾å¤‡åˆ†å‘çš„è¯·æ±‚ï¼Œè¿›è¡Œå¤„ç†å¹¶è¿”å›å“åº”çš„æ•°æ®</li> <li>è´Ÿè½½å‡è¡¡å™¨ï¼šå°†ç”¨æˆ·è®¿é—®çš„è¯·æ±‚æ ¹æ®å¯¹åº”çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåˆ†å‘åˆ°é›†ç¾¤ä¸­çš„ä¸€å°æœåŠ¡å™¨è¿›è¡Œå¤„ç†</li></ul> <h3 id="è´Ÿè½½å‡è¡¡ä½œç”¨"><a href="#è´Ÿè½½å‡è¡¡ä½œç”¨" class="header-anchor">#</a> è´Ÿè½½å‡è¡¡ä½œç”¨</h3> <ul><li>è§£å†³æœåŠ¡å™¨çš„é«˜å¹¶å‘å‹åŠ›ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„å¤„ç†æ€§èƒ½</li> <li>æä¾›æ•…éšœè½¬ç§»ï¼Œå®ç°é«˜å¯ç”¨</li> <li>é€šè¿‡æ·»åŠ æˆ–å‡å°‘æœåŠ¡å™¨æ•°é‡ï¼Œå¢å¼ºç½‘ç«™çš„å¯æ‰©å±•æ€§</li> <li>åœ¨è´Ÿè½½å‡è¡¡å™¨ä¸Šè¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§</li></ul> <h2 id="è´Ÿè½½å‡è¡¡å¸¸ç”¨å¤„ç†æ–¹å¼"><a href="#è´Ÿè½½å‡è¡¡å¸¸ç”¨å¤„ç†æ–¹å¼" class="header-anchor">#</a> è´Ÿè½½å‡è¡¡å¸¸ç”¨å¤„ç†æ–¹å¼</h2> <p>å…ˆè¯´æ˜ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯ <a href="/middleware/Nginx/Nginx_load_balancing/#å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡">å››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡</a> æ–¹å¼ï¼Œå‰é¢ä¸¤ä¸ªæ–¹å¼å¯ä»¥äº†è§£ã€‚</p> <h3 id="ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©"><a href="#ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©" class="header-anchor">#</a> ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©</h3> <p>è¿™ç§æ–¹å¼æ¯”è¾ƒåŸå§‹ï¼Œä¸»è¦å®ç°çš„æ–¹å¼å°±æ˜¯åœ¨ç½‘ç«™ä¸»é¡µä¸Šé¢æä¾›ä¸åŒçº¿è·¯ã€ä¸åŒæœåŠ¡å™¨é“¾æ¥æ–¹å¼ï¼Œè®©ç”¨æˆ·æ¥é€‰æ‹©è‡ªå·±è®¿é—®çš„å…·ä½“æœåŠ¡å™¨ï¼Œæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚</p> <p>å¦‚ä¸‹å›¾ï¼Œç”¨æˆ·ç‚¹å‡»ä¸åŒçš„ä¸‹è½½æ–¹å¼ï¼Œå°±ä¼šè·³è½¬åˆ°ä¸åŒçš„ä¸‹è½½åœ°å€ã€‚è¿™æ˜¯ä¸»åŠ¨å¼çš„è´Ÿè½½å‡è¡¡ï¼Œæˆ‘ä»¬æ— æ³•æ§åˆ¶ç”¨æˆ·çš„é€‰æ‹©ã€‚å¦‚æœç”¨æˆ·å…¨éƒ¨ç‚¹å‡»ç¬¬ä¸€ä¸ªä¸‹è½½æ–¹å¼ï¼Œé‚£ä¹ˆæœåŠ¡å™¨çš„å‹åŠ›å°†éå¸¸å¤§ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.2auhoddxb2zo.webp" alt="image"></p> <h3 id="dnsè½®è¯¢æ–¹å¼"><a href="#dnsè½®è¯¢æ–¹å¼" class="header-anchor">#</a> DNSè½®è¯¢æ–¹å¼</h3> <p>DNSï¼šåŸŸåç³»ç»Ÿï¼ˆæœåŠ¡ï¼‰åè®®ï¼ˆDNSï¼‰æ˜¯ä¸€ç§åˆ†å¸ƒå¼ç½‘ç»œç›®å½•æœåŠ¡ï¼Œä¸»è¦ç”¨äºåŸŸåä¸ IP åœ°å€çš„ç›¸äº’è½¬æ¢ã€‚</p> <p>å¤§å¤šåŸŸåæ³¨å†Œå•†éƒ½æ”¯æŒå¯¹åŒä¸€ä¸ªä¸»æœºåæ·»åŠ å¤šæ¡ A è®°å½•ï¼Œè¿™å°±æ˜¯ DNS è½®è¯¢ï¼ŒDNS æœåŠ¡å™¨å°†è§£æè¯·æ±‚æŒ‰ç…§ A è®°å½•çš„é¡ºåºï¼Œéšæœºåˆ†é…åˆ°ä¸åŒçš„ IP ä¸Šï¼Œè¿™æ ·å°±èƒ½å®Œæˆç®€å•çš„è´Ÿè½½å‡è¡¡ã€‚DNS è½®è¯¢çš„æˆæœ¬éå¸¸ä½ï¼Œåœ¨ä¸€äº›ä¸é‡è¦çš„æœåŠ¡å™¨ï¼Œè¢«ç»å¸¸ä½¿ç”¨ã€‚</p> <p>å¦‚ä¸‹å›¾ï¼šå®¢æˆ·ç«¯å¦‚æœæƒ³è®¿é—®æœåŠ¡å™¨é›†ç¾¤ï¼Œé¦–å…ˆå» DNS æœåŠ¡å™¨è·å–æˆ‘ä»¬æ›¾ç»åœ¨ DNS æœåŠ¡å™¨ä¿å­˜çš„ã€Œè®°å½•è¡¨ã€ï¼Œè¿™ä¸ªã€Œè®°å½•è¡¨ã€å°†ä¼šæŠŠæŸä¸ªæœåŠ¡å™¨çš„åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å†æ ¹æ®è¿™ä¸ªåœ°å€ï¼Œè®¿é—®æŒ‡å®šçš„æœåŠ¡å™¨ã€‚è¿™ä¸ªã€Œè®°å½•è¡¨ã€åœ¨å¼€å§‹æœŸé—´éœ€è¦æˆ‘ä»¬å» DNS æœåŠ¡å™¨è¿›è¡Œæ·»åŠ ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.b1m3qaeuxsk.webp" alt="image"></p> <p>ã€Œè®°å½•è¡¨ã€é•¿ä»€ä¹ˆæ ·ï¼Œå¦‚ä¸‹å›¾çš„ä¸»æœºè®°å½• wwwã€‚è¿™æ˜¯æˆ‘ä¸ºæŸä¸€ä¸ªåŸŸåæ·»åŠ çš„ IP åœ°å€ï¼Œç”¨ 2 å°æœåŠ¡å™¨æ¥åšè´Ÿè½½å‡è¡¡ã€‚å…¶ä¸­ä¸¤ä¸ªè®°å½•å€¼éƒ½ç»‘å®šäº† <code>www.nginx521.cn</code> åœ°å€ã€‚(ä¸€ä¸ªåŸŸåå¯ä»¥ç»‘å®šå¤šä¸ªIPåœ°å€)</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.3drj9szeeus0.webp" alt="image"></p> <p>éªŒè¯:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ping</span> www.nginx521.cn
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ³¨æ„ï¼šè®°å¾—æ¸…ç©ºæœ¬åœ°çš„ DNS ç¼“å­˜ï¼Œå¦‚æœæœ¬åœ°æœ‰ç¼“å­˜ï¼Œæ— è®ºä½ æ€ä¹ˆ <code>ping</code>ï¼Œéƒ½ä¼š <code>ping</code> åˆ°ç¼“å­˜çš„æœåŠ¡å™¨åœ°å€ï¼Œæ— æ³•è´Ÿè½½å‡è¡¡</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>ipconfig/flushdns
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç›®å‰éœ€è¦ <code>ping</code> ä¸€æ¬¡ç„¶åæ¸…ç†ä¸€æ¬¡ç¼“å­˜ï¼Œæ‰èƒ½å®ç°è´Ÿè½½å‡è¡¡çš„è½®è¯¢æ•ˆæœã€‚</p> <p>æˆ‘ä»¬å‘ç°ä½¿ç”¨ DNS æ¥å®ç°è½®è¯¢ï¼Œä¸éœ€è¦æŠ•å…¥è¿‡å¤šçš„æˆæœ¬ï¼Œè™½ç„¶ DNS è½®è¯¢æˆæœ¬ä½å»‰ï¼Œä½†æ˜¯ DNS è´Ÿè½½å‡è¡¡å­˜åœ¨æ˜æ˜¾çš„ç¼ºç‚¹ï¼š</p> <ol><li><p>å¯é æ€§ä½</p> <p>å‡è®¾ä¸€ä¸ªåŸŸå DNS è½®è¯¢å¤šå°æœåŠ¡å™¨ï¼Œå¦‚æœå…¶ä¸­çš„ä¸€å°æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è®¿é—®è¯¥æœåŠ¡å™¨çš„è¯·æ±‚å°†ä¸ä¼šæœ‰æ‰€å›åº”ï¼Œå³ä½¿ä½ å°†è¯¥æœåŠ¡å™¨çš„ IP ä» DNS ä¸­å»æ‰ï¼Œä½†æ˜¯ç”±äºå„å¤§å®½å¸¦æ¥å…¥å•†å°†ä¼—å¤šçš„ DNS å­˜æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œä»¥èŠ‚çœè®¿é—®æ—¶é—´ï¼Œå¯¼è‡´ DNS ä¸ä¼šå®æ—¶æ›´æ–°ã€‚æ‰€ä»¥ DNS è½®æµä¸Šä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è´Ÿè½½å‡è¡¡é—®é¢˜ï¼Œä½†æ˜¯å´å­˜åœ¨å¯é æ€§ä¸é«˜çš„ç¼ºç‚¹ã€‚</p></li> <li><p>è´Ÿè½½å‡è¡¡ä¸å‡è¡¡</p> <p>DNS è´Ÿè½½å‡è¡¡é‡‡ç”¨çš„æ˜¯ç®€å•çš„è½®è¯¢è´Ÿè½½ç®—æ³•ï¼Œä¸èƒ½åŒºåˆ†æœåŠ¡å™¨çš„å·®å¼‚ï¼Œä¸èƒ½åæ˜ æœåŠ¡å™¨çš„å½“å‰è¿è¡ŒçŠ¶æ€ï¼Œä¸èƒ½åšåˆ°ä¸ºæ€§èƒ½å¥½çš„æœåŠ¡å™¨å¤šåˆ†é…è¯·æ±‚ï¼Œå¦å¤–æœ¬åœ°è®¡ç®—æœºä¹Ÿä¼šç¼“å­˜å·²ç»è§£æçš„åŸŸååˆ° IP åœ°å€çš„æ˜ å°„ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ä½¿ç”¨è¯¥ DNS æœåŠ¡å™¨çš„ç”¨æˆ·åœ¨ä¸€å®šæ—¶é—´å†…è®¿é—®çš„æ˜¯åŒä¸€å° Web æœåŠ¡å™¨ï¼Œä»è€Œå¼•å‘ Web æœåŠ¡å™¨å‡çš„è´Ÿè½½ä¸å‡è¡¡ã€‚</p> <p>è´Ÿè½½ä¸å‡è¡¡åˆ™ä¼šå¯¼è‡´æŸå‡ å°æœåŠ¡å™¨è´Ÿè·å¾ˆä½ï¼Œè€Œå¦å¤–å‡ å°æœåŠ¡å™¨è´Ÿè·ç¡®å¾ˆé«˜ï¼Œå¤„ç†è¯·æ±‚çš„é€Ÿåº¦æ…¢ï¼Œé…ç½®é«˜çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å°‘ï¼Œè€Œé…ç½®ä½çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å¤šã€‚</p></li></ol> <h3 id="å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡"><a href="#å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> å››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡</h3> <p>ä»‹ç»å››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼ŒOSI(open system interconnection)ï¼Œå«å¼€æ”¾å¼ç³»ç»Ÿäº’è”æ¨¡å‹ï¼Œè¿™ä¸ªæ˜¯ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ ISO æŒ‡å®šçš„ä¸€ä¸ªä¸åŸºäºå…·ä½“æœºå‹ã€æ“ä½œç³»ç»Ÿæˆ–å…¬å¸çš„ç½‘ç»œä½“ç³»ç»“æ„ã€‚è¯¥æ¨¡å‹å°†ç½‘ç»œé€šä¿¡çš„å·¥ä½œåˆ†ä¸ºä¸ƒå±‚ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.5g3vvj5xa3g0.webp" alt="image"></p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.6uq265ihol80.webp" alt="image"></p> <ul><li>åº”ç”¨å±‚ï¼šä¸ºåº”ç”¨ç¨‹åºæä¾›ç½‘ç»œæœåŠ¡ã€‚</li> <li>è¡¨ç¤ºå±‚ï¼šå¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–ã€ç¼–ç ã€åŠ å¯†ã€å‹ç¼©ç­‰æ“ä½œ</li> <li>ä¼šè¯å±‚ï¼šå»ºç«‹ã€ç»´æŠ¤ã€ç®¡ç†ä¼šè¯è¿æ¥</li> <li>ä¼ è¾“å±‚ï¼šå»ºç«‹ã€ç»´æŠ¤ã€ç®¡ç†ç«¯åˆ°ç«¯çš„è¿æ¥ï¼Œå¸¸è§çš„æœ‰ TCP/UDP</li> <li>ç½‘ç»œå±‚ï¼šIP å¯»å€å’Œè·¯ç”±é€‰æ‹©</li> <li>æ•°æ®é“¾è·¯å±‚ï¼šæ§åˆ¶ç½‘ç»œå±‚ä¸ç‰©ç†å±‚ä¹‹é—´çš„é€šä¿¡</li> <li>ç‰©ç†å±‚ï¼šæ¯”ç‰¹æµä¼ è¾“</li></ul> <p><strong>ä»€ä¹ˆæ˜¯å››å±‚è´Ÿè½½å‡è¡¡</strong></p> <p>æ‰€è°“å››å±‚è´Ÿè½½å‡è¡¡æŒ‡çš„æ˜¯ OSI ä¸ƒå±‚æ¨¡å‹ä¸­çš„ä¼ è¾“å±‚ï¼Œä¸»è¦æ˜¯åŸºäº IP + PORT çš„è´Ÿè½½å‡è¡¡</p> <p>å®ç°å››å±‚è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼š</p> <ul><li>ç¡¬ä»¶ï¼šF5 BIG-IPã€Radware ç­‰ï¼Œæ€§èƒ½å¥½ï¼Œæˆæœ¬é«˜ã€æ— æ³•æ‰©å±•</li> <li>è½¯ä»¶ï¼šLVSã€Nginxã€Hayproxy ç­‰ï¼Œæ€§èƒ½è¾ƒå¥½ï¼Œæˆæœ¬ä½ã€å¯ä»¥æ‰©å±•</li></ul> <p><strong>ä»€ä¹ˆæ˜¯ä¸ƒå±‚è´Ÿè½½å‡è¡¡</strong></p> <p>æ‰€è°“çš„ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡çš„æ˜¯åœ¨åº”ç”¨å±‚ï¼Œä¸»è¦æ˜¯åŸºäºè™šæ‹Ÿçš„ URL æˆ–ä¸»æœº IP çš„è´Ÿè½½å‡è¡¡</p> <p>å®ç°ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼š</p> <ul><li>è½¯ä»¶ï¼šNginxã€Hayproxy ç­‰</li></ul> <p><strong>å››å±‚å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«</strong></p> <ul><li>å››å±‚è´Ÿè½½å‡è¡¡æ•°æ®åŒ…æ˜¯åœ¨åº•å±‚å°±è¿›è¡Œäº†åˆ†å‘ï¼Œè€Œä¸ƒå±‚è´Ÿè½½å‡è¡¡æ•°æ®åŒ…åˆ™åœ¨æœ€é¡¶ç«¯è¿›è¡Œåˆ†å‘ï¼Œæ‰€ä»¥å››å±‚è´Ÿè½½å‡è¡¡çš„æ•ˆç‡æ¯”ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„è¦é«˜ï¼ˆå››å±‚æ¯”ä¸ƒå±‚å°‘ï¼Œé€Ÿåº¦å—ï¼Œæ•ˆç‡é«˜ï¼Œä½†æ˜¯å¯èƒ½è¯·æ±‚ä¸¢å¤±ç­‰ï¼‰</li> <li>å››å±‚è´Ÿè½½å‡è¡¡ä¸è¯†åˆ«åŸŸåï¼Œè€Œä¸ƒå±‚è´Ÿè½½å‡è¡¡è¯†åˆ«åŸŸå</li></ul> <p>å¤„ç†å››å±‚å’Œä¸ƒå±‚è´Ÿè½½ä»¥å¤–ï¼Œå…¶å®è¿˜æœ‰äºŒå±‚ã€ä¸‰å±‚è´Ÿè½½å‡è¡¡ï¼ŒäºŒå±‚æ˜¯åœ¨æ•°æ®é“¾è·¯å±‚åŸºäº mac åœ°å€æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œä¸‰å±‚æ˜¯åœ¨ç½‘ç»œå±‚ä¸€èˆ¬é‡‡ç”¨è™šæ‹Ÿ IP åœ°å€çš„æ–¹å¼å®ç°è´Ÿè½½å‡è¡¡ã€‚</p> <p><strong>å®é™…ç¯å¢ƒé‡‡ç”¨çš„æ¨¡å¼ï¼šå››å±‚è´Ÿè½½(LVS) + ä¸ƒå±‚è´Ÿè½½(Nginx)</strong></p> <h2 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡"><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡</h2> <p>Nginx è¦å®ç°ä¸ƒå±‚è´Ÿè½½å‡è¡¡éœ€è¦ç”¨åˆ° proxy_pass ä»£ç†æ¨¡å—é…ç½®ã€‚Nginx é»˜è®¤å®‰è£…æ”¯æŒè¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†åšä»»ä½•å¤„ç†ã€‚Nginx çš„è´Ÿè½½å‡è¡¡æ˜¯åœ¨ Nginx åå‘ä»£ç†çš„åŸºç¡€ä¸ŠæŠŠç”¨æˆ·çš„è¯·æ±‚æ ¹æ®æŒ‡å®šçš„ç®—æ³•åˆ†å‘åˆ°ä¸€ç»„ã€Œupstream è™šæ‹ŸæœåŠ¡æ± ã€ã€‚</p> <h3 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤"><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤" class="header-anchor">#</a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤</h3> <h4 id="upstreamæŒ‡ä»¤"><a href="#upstreamæŒ‡ä»¤" class="header-anchor">#</a> upstreamæŒ‡ä»¤</h4> <p>è¯¥æŒ‡ä»¤æ˜¯ç”¨æ¥å®šä¹‰ä¸€ç»„æœåŠ¡å™¨ï¼Œå®ƒä»¬å¯ä»¥æ˜¯ç›‘å¬ä¸åŒç«¯å£çš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥æ˜¯åŒæ—¶ç›‘å¬ TCP å’Œ Unix socket çš„æœåŠ¡å™¨ã€‚æœåŠ¡å™¨å¯ä»¥æŒ‡å®šä¸åŒçš„æƒé‡ï¼Œé»˜è®¤ä¸º 1ã€‚</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>upstream &lt;name&gt; {...}</td> <td>â€”</td> <td>http</td></tr></tbody></table> <h4 id="serveræŒ‡ä»¤"><a href="#serveræŒ‡ä»¤" class="header-anchor">#</a> serveræŒ‡ä»¤</h4> <p>è¯¥æŒ‡ä»¤ç”¨æ¥æŒ‡å®šåç«¯æœåŠ¡å™¨çš„åç§°å’Œä¸€äº›å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨åŸŸåã€IPã€ç«¯å£æˆ–è€… Unix socketã€‚</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>server &lt;name&gt; [paramerters]</td> <td>â€”</td> <td>upstream</td></tr></tbody></table> <p>server åçš„ name å°±æ˜¯ upstream åçš„ nameï¼Œä¸¤è€…ä¿æŒä¸€è‡´ã€‚</p> <h3 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤æ¡ˆä¾‹"><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤æ¡ˆä¾‹" class="header-anchor">#</a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤æ¡ˆä¾‹</h3> <p>å‡†å¤‡å››å°æœåŠ¡å™¨ï¼Œä¸€å°ç”¨æ¥åšè´Ÿè½½å‡è¡¡å™¨ï¼Œä¸‰å°ç”¨æ¥æ¥æ”¶è´Ÿè½½å‡è¡¡å™¨çš„è¯·æ±‚ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220803/image.etsfgkwsxaw.webp" alt="image"></p> <p>å› ä¸ºç›®å‰åªæœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸€å°ç”¨æ¥åšè´Ÿè½½å‡è¡¡å™¨ï¼Œå¦å¤–ä¸€å°ç”¨æ¥æ¥æ”¶è´Ÿè½½å‡è¡¡å™¨çš„è¯·æ±‚ã€‚</p> <p>æœåŠ¡å™¨è®¾ç½®ï¼šè¿™é‡Œä»¥ä¸‰ä¸ªç«¯å£ä»£æ›¿ä¸‰ä¸ªæœåŠ¡å™¨ï¼Œåœ¨é…ç½®æ–‡ä»¶è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment"># æœåŠ¡å™¨ 1</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>   <span class="token number">9001</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span> text/html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
    	<span class="token directive"><span class="token keyword">return</span> <span class="token number">200</span> <span class="token string">'&lt;h1&gt;192.168.200.146:9001&lt;/h1&gt;'</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment"># æœåŠ¡å™¨ 2</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>   <span class="token number">9002</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span> text/html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
    	<span class="token directive"><span class="token keyword">return</span> <span class="token number">200</span> <span class="token string">'&lt;h1&gt;192.168.200.146:9002&lt;/h1&gt;'</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment"># æœåŠ¡å™¨ 3</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>   <span class="token number">9003</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default_type</span> text/html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    	<span class="token directive"><span class="token keyword">return</span> <span class="token number">200</span> <span class="token string">'&lt;h1&gt;192.168.200.146:9003&lt;/h1&gt;'</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>è´Ÿè½½å‡è¡¡å™¨è®¾ç½®ï¼šè¿™æ˜¯ä¸€ä¸ª Nginx ä»£ç†æœåŠ¡å™¨ï¼Œè®©å®ƒå»è´Ÿè½½å‡è¡¡è®¿é—®ä¸‰ä¸ªæœåŠ¡å™¨ï¼Œåœ¨é…ç½®æ–‡ä»¶è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9091</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9092</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9093</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>   <span class="token comment"># backend è¦å¯¹åº”ä¸Š upstream åçš„å€¼ï¼Œæ ¹æ®éœ€æ±‚ä¿®æ”¹</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è®¿é—®è´Ÿè½½å‡è¡¡å™¨çš„åœ°å€ï¼Œå¦‚ <code>http://192.168.200.133:8083</code>ï¼Œå®ƒä¼šæ‰¾åˆ° <code>proxy_pass</code> åçš„åœ°å€ï¼Œæ¯”å¦‚ä¸Šæ–¹ï¼Œå®ƒä¼šæ ¹æ® backend æ‰¾åˆ°å¯¹åº”çš„ upstream é‡Œå†…åœ°å€ï¼Œæ›¿æ¢æ‰ backendï¼Œå˜æˆï¼š</p> <ul><li>proxy_pass <code>http://192.168.200.146:9091</code></li> <li>proxy_pass <code>http://192.168.200.146:9092</code></li> <li>proxy_pass <code>http://192.168.200.146:9093</code></li></ul> <p>ä½†æ˜¯å®ƒä¸ä¼šå…¨éƒ¨è®¿é—®ä¸‰ä¸ªæœåŠ¡å™¨åœ°å€ï¼Œè€Œæ˜¯æ ¹æ®è‡ªå·±çš„ç®—æ³•ï¼ˆè½®è¯¢ï¼‰é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæœåŠ¡å™¨åœ°å€ã€‚</p> <h3 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡çŠ¶æ€"><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡çŠ¶æ€" class="header-anchor">#</a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡çŠ¶æ€</h3> <p>ä»£ç†æœåŠ¡å™¨åœ¨è´Ÿè´£å‡è¡¡è°ƒåº¦ä¸­çš„çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p> <table><thead><tr><th>çŠ¶æ€</th> <th>æ¦‚è¿°</th></tr></thead> <tbody><tr><td>down</td> <td>å½“å‰çš„ server æš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡</td></tr> <tr><td>backup</td> <td>é¢„ç•™çš„å¤‡ä»½æœåŠ¡å™¨</td></tr> <tr><td>max_fails</td> <td>å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°</td></tr> <tr><td>fail_timeout</td> <td>ç»è¿‡ max_fails å¤±è´¥åï¼ŒæœåŠ¡æš‚åœæ—¶é—´</td></tr> <tr><td>max_conns</td> <td>é™åˆ¶æœ€å¤§çš„æ¥æ”¶è¿æ¥æ•°</td></tr></tbody></table> <h4 id="down"><a href="#down" class="header-anchor">#</a> down</h4> <p><code>down</code> æŒ‡ä»¤å°†è¯¥æœåŠ¡å™¨æ ‡è®°ä¸ºæ°¸ä¹…ä¸å¯ç”¨ï¼Œé‚£ä¹ˆè´Ÿè½½å‡è¡¡å™¨å°†ä¸å‚ä¸è¯¥æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ã€‚</p> <p>å¦‚ä¸‹ï¼Œå¦‚æœä¸å¸Œæœ›è´Ÿè½½å‡è¡¡å™¨ä»¥è´Ÿè½½å‡è¡¡æ¥å¤„ç† <code>192.168.200.146</code> æœåŠ¡å™¨ï¼š</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001 down</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002
	server 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¯¥çŠ¶æ€ä¸€èˆ¬ä¼šå¯¹éœ€è¦åœæœºç»´æŠ¤çš„æœåŠ¡å™¨è¿›è¡Œè®¾ç½®ã€‚</p> <h4 id="backup"><a href="#backup" class="header-anchor">#</a> backup</h4> <p><code>backup</code> æŒ‡ä»¤å°†è¯¥æœåŠ¡å™¨æ ‡è®°ä¸ºå¤‡ä»½æœåŠ¡å™¨ï¼Œå½“ä¸»æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼Œæ‰ç”¨å¤‡ä»½æœåŠ¡å™¨æ¥ä¼ é€’è¯·æ±‚ã€‚</p> <p>å®ƒä¸åŒäº down æŒ‡ä»¤ï¼Œdown æŒ‡ä»¤å°†æœåŠ¡å™¨æ°¸ä¹…ç¦æ­¢ï¼Œè€Œ backp æŒ‡ä»¤ä»…ä»…ä¸´æ—¶ç¦æ­¢ï¼Œå½“ä¸»æœåŠ¡å™¨ä¸å¯ç”¨åï¼Œä¸´æ—¶ç¦æ­¢çš„æœåŠ¡å™¨å°±ä¼šç«™å‡ºæ¥ã€‚</p> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001 down</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002 backup</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¸Šæ–¹ä»£ç ä¸­ 9001 æœåŠ¡å™¨æ°¸ä¹…ç¦æ­¢ï¼Œè€Œ 9002 æœåŠ¡å™¨æ˜¯å¤‡ä»½æœåŠ¡å™¨ï¼Œæ‰€ä»¥ 9003 æœåŠ¡å™¨æ˜¯ä¸»æœåŠ¡å™¨ã€‚</p> <p>æ­¤æ—¶éœ€è¦å°† 9003 ç«¯å£çš„è®¿é—®ç¦æ­¢æ‰ï¼Œç”¨å®ƒæ¥æ¨¡æ‹Ÿå½“å”¯ä¸€å¯¹å¤–æä¾›è®¿é—®çš„æœåŠ¡å®•æœºä»¥åï¼Œbackup çš„å¤‡ä»½æœåŠ¡å™¨å°±èƒ½å¼€å§‹å¯¹å¤–æä¾›æœåŠ¡ã€‚</p> <p>ä¸ºäº†æµ‹è¯•éªŒè¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨é˜²ç«å¢™æ¥è¿›è¡Œæ‹¦æˆªã€‚</p> <p>ä»‹ç»ä¸€ä¸ªå·¥å…· <code>firewall-cmd</code>ï¼Œè¯¥å·¥å…·æ˜¯ Linux æä¾›çš„ä¸“é—¨ç”¨æ¥æ“ä½œ firewall é˜²ç«å¢™çš„ã€‚</p> <p>æŸ¥è¯¢é˜²ç«å¢™ä¸­æŒ‡å®šçš„ç«¯å£æ˜¯å¦å¼€æ”¾</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firewall-cmd --query-port<span class="token operator">=</span><span class="token number">9001</span>/tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¼€æ”¾ä¸€ä¸ªæŒ‡å®šçš„ç«¯å£</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firewall-cmd <span class="token parameter variable">--permanent</span> --add-port<span class="token operator">=</span><span class="token number">9002</span>/tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ‰¹é‡æ·»åŠ å¼€å‘ç«¯å£</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firewall-cmd <span class="token parameter variable">--permanent</span> --add-port<span class="token operator">=</span><span class="token number">9001</span>-9003/tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚ä½•ç§»é™¤ä¸€ä¸ªæŒ‡å®šçš„ç«¯å£</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firewall-cmd <span class="token parameter variable">--permanent</span> --remove-port<span class="token operator">=</span><span class="token number">9003</span>/tcp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é‡æ–°åŠ è½½</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å…¶ä¸­</p> <ul><li><code>--permanent</code> è¡¨ç¤ºè®¾ç½®ä¸ºæŒä¹…</li> <li><code>--add-port</code> è¡¨ç¤ºæ·»åŠ æŒ‡å®šç«¯å£</li> <li><code>--remove-port</code> è¡¨ç¤ºç§»é™¤æŒ‡å®šç«¯å£</li></ul> <p>ç»è¿‡æµ‹è¯•ï¼Œç¦ç”¨æ‰ 9003 ç«¯å£åï¼Œå†æ¬¡è®¿é—®è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒåªä¼šè¯·æ±‚ 9002 ç«¯å£çš„æœåŠ¡å™¨(å¤‡ä»½æœåŠ¡å™¨)ï¼Œè€Œæ¢å¤ 9003 ç«¯å£ï¼Œåªä¼šè¯·æ±‚ 9003 ç«¯å£çš„æœåŠ¡å™¨ã€‚</p> <h4 id="max-conns"><a href="#max-conns" class="header-anchor">#</a> max_conns</h4> <p><code>max_conns</code> æŒ‡ä»¤ç”¨æ¥é™åˆ¶åŒæ—¶è¿æ¥åˆ° upstream è´Ÿè½½ä¸Šçš„å•ä¸ªæœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ã€‚é»˜è®¤ä¸º 0ï¼Œè¡¨ç¤ºä¸é™åˆ¶ï¼Œä½¿ç”¨è¯¥é…ç½®å¯ä»¥æ ¹æ®åç«¯æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„å¹¶å‘é‡æ¥è¿›è¡Œè®¾ç½®ï¼Œé˜²æ­¢åç«¯æœåŠ¡å™¨è¢«å‹å®ã€‚</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>max_conns=&lt;number&gt;</td> <td>0</td> <td>upstream</td></tr></tbody></table> <ul><li>number æ˜¯å¤§äº 0 çš„æ•°å­—ã€‚</li></ul> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001 down</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002 backup</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003 max_conns=2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ç¬¬ 4 è¡Œé…ç½®æ ‡è¯† 9003 ç«¯å£çš„æœåŠ¡å™¨æœ€å¤§èƒ½è¢« 2 ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚</p> <h4 id="max-failså’Œfail-timeout"><a href="#max-failså’Œfail-timeout" class="header-anchor">#</a> max_failså’Œfail_timeout</h4> <p><code>max_fails</code> æŒ‡ä»¤è®¾ç½®å…è®¸è¯·æ±‚ä»£ç†æœåŠ¡å™¨å¤±è´¥çš„æ¬¡æ•°ï¼Œé»˜è®¤ä¸º 1ã€‚</p> <p><code>fail_timeout</code> æŒ‡ä»¤è®¾ç½®ç»è¿‡ max_fails å¤±è´¥åï¼ŒæœåŠ¡æš‚åœçš„æ—¶é—´ï¼Œé»˜è®¤æ˜¯ 10 ç§’ã€‚</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>max_fails=&lt;number&gt;</td> <td>1</td> <td>upstream</td></tr> <tr><td>fail_timeout=&lt;time&gt;</td> <td>10 ç§’</td> <td>upstream</td></tr></tbody></table> <ul><li>number æ˜¯å¤§äº 0 çš„æ•°å­—</li> <li>time æ˜¯æ—¶é—´ï¼Œå•ä½ä¸ºç§’</li></ul> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.133:9001 down</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.133:9002 backup</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.133:9003 max_fails=3 fail_timeout=15</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥" class="header-anchor">#</a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥</h3> <p>ä»‹ç»å®Œ Nginx è´Ÿè½½å‡è¡¡çš„ç›¸å…³æŒ‡ä»¤åï¼Œæˆ‘ä»¬å·²ç»èƒ½å®ç°å°†ç”¨æˆ·çš„è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆé™¤äº†é‡‡ç”¨é»˜è®¤çš„åˆ†é…æ–¹å¼ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½é‡‡ç”¨ä»€ä¹ˆæ ·çš„è´Ÿè½½ç®—æ³•ï¼Ÿ</p> <p>Nginx çš„ upstream æ”¯æŒå¦‚ä¸‹å…­ç§æ–¹å¼çš„åˆ†é…ç®—æ³•ï¼Œåˆ†åˆ«æ˜¯:</p> <table><thead><tr><th>ç®—æ³•åç§°</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td>è½®è¯¢</td> <td>é»˜è®¤æ–¹å¼</td></tr> <tr><td>weight</td> <td>æƒé‡æ–¹å¼</td></tr> <tr><td>ip_hash</td> <td>ä¾æ® IP åˆ†é…æ–¹å¼</td></tr> <tr><td>least_conn</td> <td>ä¾æ®æœ€å°‘è¿æ¥æ–¹å¼</td></tr> <tr><td>url_hash</td> <td>ä¾æ® URL åˆ†é…æ–¹å¼</td></tr> <tr><td>fair</td> <td>ä¾æ®å“åº”æ—¶é—´æ–¹å¼</td></tr></tbody></table> <h4 id="è½®è¯¢"><a href="#è½®è¯¢" class="header-anchor">#</a> è½®è¯¢</h4> <p>è¿™æ˜¯ <code>upstream</code> æ¨¡å—è´Ÿè½½å‡è¡¡é»˜è®¤çš„ç­–ç•¥ã€‚æ¯ä¸ªè¯·æ±‚ä¼šæŒ‰æ—¶é—´é¡ºåºé€ä¸ªåˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ã€‚è½®è¯¢ä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="weightåŠ æƒ-åŠ æƒè½®è¯¢"><a href="#weightåŠ æƒ-åŠ æƒè½®è¯¢" class="header-anchor">#</a> weightåŠ æƒ[åŠ æƒè½®è¯¢]</h4> <p><code>weight</code> æŒ‡ä»¤ç”¨æ¥è®¾ç½®æœåŠ¡å™¨çš„æƒé‡ï¼Œé»˜è®¤ä¸º 1ï¼Œæƒé‡æ•°æ®è¶Šå¤§ï¼Œè¢«åˆ†é…åˆ°è¯·æ±‚çš„å‡ ç‡è¶Šå¤§ï¼›è¯¥æƒé‡å€¼ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å®é™…å·¥ä½œç¯å¢ƒä¸­ä¸åŒçš„åç«¯æœåŠ¡å™¨ç¡¬ä»¶é…ç½®è¿›è¡Œè°ƒæ•´çš„ï¼Œæ‰€æœ‰æ­¤ç­–ç•¥æ¯”è¾ƒé€‚åˆæœåŠ¡å™¨çš„ç¡¬ä»¶é…ç½®å·®åˆ«æ¯”è¾ƒå¤§çš„æƒ…å†µã€‚</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>weight=&lt;number&gt;</td> <td>1</td> <td>upstream</td></tr></tbody></table> <ul><li>number æ˜¯å¤§äº 0 çš„æ•°å­—</li></ul> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001 weight=10</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002 weight=5</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003 weight=3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="ip-hash"><a href="#ip-hash" class="header-anchor">#</a> ip_hash</h4> <p>å½“å¯¹åç«¯çš„å¤šå°åŠ¨æ€åº”ç”¨æœåŠ¡å™¨åšè´Ÿè½½å‡è¡¡æ—¶ï¼Œ<code>ip_hash</code> æŒ‡ä»¤èƒ½å¤Ÿå°†æŸä¸ªå®¢æˆ·ç«¯ IP çš„è¯·æ±‚é€šè¿‡å“ˆå¸Œç®—æ³•å®šä½åˆ°åŒä¸€å°åç«¯æœåŠ¡å™¨ä¸Šã€‚</p> <p>è¿™æ ·ï¼Œå½“æ¥è‡ªæŸä¸€ä¸ª IP çš„ç”¨æˆ·åœ¨åç«¯ Web æœåŠ¡å™¨ A ä¸Šç™»å½•åï¼Œåœ¨è®¿é—®è¯¥ç«™ç‚¹çš„å…¶ä»– URLï¼Œèƒ½ä¿è¯å…¶è®¿é—®çš„è¿˜æ˜¯åç«¯ Web æœåŠ¡å™¨ A</p> <p>æ€»ç»“ï¼šå“ªä¸ªæœåŠ¡å™¨æ›¾ç»å¤„ç†è¿‡è¯·æ±‚ï¼Œæ— è®ºåœ¨å“ªé‡Œï¼Œç›¸åŒçš„è¯·æ±‚ä¾ç„¶è®©è¯¥æœåŠ¡å™¨å¤„ç†</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>ip_hash;</td> <td>â€”</td> <td>upstream</td></tr></tbody></table> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">ip_hash</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>éœ€è¦é¢å¤–å¤šè¯´ä¸€ç‚¹çš„æ˜¯ä½¿ç”¨ ip_hash æŒ‡ä»¤æ— æ³•ä¿è¯åç«¯æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ï¼Œå¯èƒ½å¯¼è‡´æœ‰äº›åç«¯æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å¤šï¼Œæœ‰äº›åç«¯æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚å°‘ï¼Œè€Œä¸”è®¾ç½®åç«¯æœåŠ¡å™¨æƒé‡ç­‰æ–¹æ³•å°†ä¸èµ·ä½œç”¨ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.7a0ysgphfxg0.webp" alt="image"></p> <h4 id="least-conn"><a href="#least-conn" class="header-anchor">#</a> least_conn</h4> <p>æœ€å°‘è¿æ¥æ•°ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™è¿æ¥æ•°è¾ƒå°‘çš„åç«¯æœåŠ¡å™¨ã€‚</p> <p>è½®è¯¢ç®—æ³•æ˜¯æŠŠè¯·æ±‚å¹³å‡çš„è½¬å‘ç»™å„ä¸ªåç«¯ï¼Œä½¿å®ƒä»¬çš„è´Ÿè½½å¤§è‡´ç›¸åŒï¼›ä½†æ˜¯ï¼Œæœ‰äº›è¯·æ±‚å ç”¨çš„æ—¶é—´å¾ˆé•¿ï¼Œä¼šå¯¼è‡´å…¶æ‰€åœ¨çš„åç«¯è´Ÿè½½è¾ƒé«˜ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>least_conn</code> è¿™ç§æ–¹å¼å°±å¯ä»¥è¾¾åˆ°æ›´å¥½çš„è´Ÿè½½å‡è¡¡æ•ˆæœã€‚</p> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">least_conn</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ­¤è´Ÿè½½å‡è¡¡ç­–ç•¥é€‚åˆè¯·æ±‚å¤„ç†æ—¶é—´é•¿çŸ­ä¸ä¸€é€ æˆæœåŠ¡å™¨è¿‡è½½çš„æƒ…å†µã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.5vug3q9whrc0.webp" alt="image"></p> <h4 id="url-hash"><a href="#url-hash" class="header-anchor">#</a> url_hash</h4> <p>æŒ‰è®¿é—® URL çš„ hash ç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ª URL å®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œè¦é…åˆç¼“å­˜å‘½ä¸­æ¥ä½¿ç”¨ã€‚</p> <p>å½“å‡ºç°åŒä¸€ä¸ªèµ„æºå¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šåˆ°è¾¾ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå¯¼è‡´ä¸å¿…è¦çš„å¤šæ¬¡ä¸‹è½½ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ï¼Œä»¥åŠä¸€äº›èµ„æºæ—¶é—´çš„æµªè´¹æ—¶ï¼Œä½¿ç”¨ <code>url_hash</code>ï¼Œå¯ä»¥ä½¿å¾—åŒä¸€ä¸ª URLï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªèµ„æºè¯·æ±‚ï¼‰ä¼šåˆ°è¾¾åŒä¸€å°æœåŠ¡å™¨ï¼Œä¸€æ—¦ç¼“å­˜ä½äº†èµ„æºï¼Œå†æ­¤æ”¶åˆ°è¯·æ±‚ï¼Œå°±å¯ä»¥ä»ç¼“å­˜ä¸­è¯»å–ã€‚</p> <p>æ€»ç»“ï¼šå‘é€ç›¸åŒçš„è¯·æ±‚æ—¶ï¼Œå¸Œæœ›åªæœ‰ä¸€ä¸ªæœåŠ¡å™¨å¤„ç†è¯¥è¯·æ±‚ï¼Œä½¿ç”¨ <code>uri_hash</code>ã€‚å› ä¸º URL ç›¸åŒï¼Œåˆ™å“ˆå¸Œå€¼(hash)ç›¸åŒï¼Œé‚£ä¹ˆå“ˆå¸Œå€¼å¯¹åº”çš„æœåŠ¡å™¨ä¹Ÿç›¸åŒã€‚</p> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">hash</span> &amp;request_uri</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å¦‚å›¾ï¼šæ–‡ä»¶ç³»ç»Ÿæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œç›®å‰åªæœ‰ web æœåŠ¡ 1 å’ŒæœåŠ¡ 3 è·å–äº†è¯¥æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³è¦ä¸‹è½½è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œåªèƒ½æ‰¾æœåŠ¡ 1 æˆ–æœåŠ¡ 3ï¼Œè¿™æ—¶å€™å°±å›ºå®šä¸€ä¸ª URLï¼Œè¯¥ URL ä¸å…è®¸æœåŠ¡ 2 è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¦‚ä½•è§„å®šå“ªä¸ªæœåŠ¡å¤„ç†å‘¢ï¼Ÿå°±ç”¨åˆ° <code>url_hash</code>ã€‚</p> <p>å®ƒä¼šæ ¹æ® URL è®¡ç®—å¤„å“ˆå¸Œå€¼ï¼Œç”±å“ˆå¸Œå€¼å¯¹åº”æœåŠ¡ï¼Œæ‰€ä»¥å›ºå®šä¸‹è½½æ–‡ä»¶çš„ URLï¼Œå°±å›ºå®šäº†ä¸€ä¸ªæœåŠ¡å¤„ç†ã€‚</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.utb83x535xc.webp" alt="image"></p> <h4 id="fair"><a href="#fair" class="header-anchor">#</a> fair</h4> <p><code>fair</code> æŒ‡ä»¤é‡‡ç”¨çš„ä¸æ˜¯å†…å»ºè´Ÿè½½å‡è¡¡ä½¿ç”¨çš„è½®æ¢çš„å‡è¡¡ç®—æ³•ï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®é¡µé¢å¤§å°ã€åŠ è½½æ—¶é—´é•¿çŸ­æ™ºèƒ½çš„è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</p> <p>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—çš„ fair è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Ÿ</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">nupstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">fair</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä½†æ˜¯è¿™æ ·ç›´æ¥ä½¿ç”¨ä¼šæŠ¥é”™ï¼Œå› ä¸º fair å±äºç¬¬ä¸‰æ–¹æ¨¡å—å®ç°çš„è´Ÿè½½å‡è¡¡ã€‚éœ€è¦æ·»åŠ  <code>nginx-upstream-fair</code> æ¨¡å—ï¼Œå¦‚ä½•æ·»åŠ å¯¹åº”çš„æ¨¡å—ï¼š</p> <ol><li>ä¸‹è½½ <code>nginx-upstream-fair</code> æ¨¡å—ï¼Œä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>https://github.com/gnosek/nginx-upstream-fair
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>å°†ä¸‹è½½çš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è¿›è¡Œè§£å‹ç¼©</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># è¿›å…¥å®‰è£…åŒ…ç›®å½•</span>
<span class="token builtin class-name">cd</span> /opt
<span class="token comment"># è§£å‹</span>
<span class="token function">unzip</span> nginx-upstream-fair-master.zip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>æˆ‘çš„è§£å‹ç›®å½•åœ¨ <code>/opt</code>ï¼Œæ‰€ä»¥ç¬¬ 6 æ­¥è®°å¾—æŒ‡å®šå¥½æ¨¡å—çš„è·¯å¾„ã€‚</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mv</span> nginx-upstream-fair-master fair
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>å°†åŸæœ‰ <code>/usr/local/nginx/sbin/nginx</code> è¿›è¡Œå¤‡ä»½</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mv</span> /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.backup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>æŸ¥çœ‹ <code>configure arguments</code> çš„é…ç½®ä¿¡æ¯ï¼Œæ‹·è´å‡ºæ¥</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>nginx <span class="token parameter variable">-V</span>
<span class="token comment"># æ‹·è´ configure arguments åé¢çš„æ•°æ®</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="6"><li>è¿›å…¥ Nginx çš„å®‰è£…ç›®å½•ï¼Œæ‰§è¡Œ make clean æ¸…ç©ºä¹‹å‰ç¼–è¯‘çš„å†…å®¹</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /root/nginx/core/nginx-1.21.6
<span class="token function">make</span> clean
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="7"><li>ä½¿ç”¨ configure æ¥é…ç½®å‚æ•°ï¼Œæ·»åŠ æ¨¡å—ï¼Œè®°å¾—åŠ ä¸Šç¬¬ï¼ˆ4ï¼‰æ­¥æ‹·è´çš„é…ç½®ä¿¡æ¯</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure --add-module<span class="token operator">=</span>/opt/fair  <span class="token comment"># è®°å¾—æ·»åŠ  configure arguments åçš„æ•°æ®</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="8"><li>é€šè¿‡ make æ¨¡æ¿è¿›è¡Œç¼–è¯‘</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç¼–è¯‘å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œ<code>ngx_http_upstream_srv_conf_t</code> ç»“æ„ä¸­ç¼ºå°‘ <code>default_port</code></p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.vj3xrayy84g.webp" alt="image"></p> <p>è§£å†³æ–¹æ¡ˆï¼š</p> <p>åœ¨ Nginx çš„æºç ç›®å½•ï¼ˆå®‰è£…åŒ…ç›®å½•ï¼‰ä¸­ <code>src/http/ngx_http_upstream.h</code>ï¼Œæ‰¾åˆ° <code>ngx_http_upstream_srv_conf_s</code>ï¼Œåœ¨æ¨¡å—ä¸­æ·»åŠ æ·»åŠ  <code>default_port</code> å±æ€§</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">vim</span> /opt/nginx/core/nginx-1.21.6/src/http/ngx_http_upstream.h
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ·»åŠ å†…å®¹ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>in_port_t	   default_port
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.1mcquncem2u8.webp" alt="image"></p> <p>ç„¶åå†è¿›è¡Œ makeã€‚</p> <ol start="9"><li>å°†å®‰è£…ç›®å½•ä¸‹çš„ objs ä¸­çš„ nginx æ‹·è´åˆ° sbin ç›®å½•</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /opt/nginx/core/nginx-1.21.6/objs
<span class="token function">cp</span> nginx /usr/local/nginx/sbin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>10 .æ›´æ–°nginx</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /opt/nginx/core/nginx-1.21.6
<span class="token function">make</span> upgrade
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»‹ç»äº† Nginx å¸¸ç”¨çš„è´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼Œæœ‰äººè¯´æ˜¯ 5 ç§ï¼Œæ˜¯æŠŠè½®è¯¢å’ŒåŠ æƒè½®è¯¢å½’ä¸ºä¸€ç§ï¼Œä¹Ÿæœ‰äººè¯´æ˜¯ 6 ç§ã€‚é‚£ä¹ˆåœ¨å’±ä»¬ä»¥åçš„å¼€å‘ä¸­åˆ°åº•ä½¿ç”¨å“ªç§ï¼Œè¿™ä¸ªéœ€è¦æ ¹æ®å®é™…é¡¹ç›®çš„åº”ç”¨åœºæ™¯æ¥å†³å®šçš„ã€‚</p> <h3 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡æ¡ˆä¾‹"><a href="#ä¸ƒå±‚è´Ÿè½½å‡è¡¡æ¡ˆä¾‹" class="header-anchor">#</a> ä¸ƒå±‚è´Ÿè½½å‡è¡¡æ¡ˆä¾‹</h3> <h4 id="æ¡ˆä¾‹ä¸€-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°ä¸€èˆ¬è½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡"><a href="#æ¡ˆä¾‹ä¸€-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°ä¸€èˆ¬è½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> æ¡ˆä¾‹ä¸€ï¼šå¯¹æ‰€æœ‰è¯·æ±‚å®ç°ä¸€èˆ¬è½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡</h4> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="æ¡ˆä¾‹äºŒ-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°åŠ æƒè½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡"><a href="#æ¡ˆä¾‹äºŒ-å¯¹æ‰€æœ‰è¯·æ±‚å®ç°åŠ æƒè½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> æ¡ˆä¾‹äºŒï¼šå¯¹æ‰€æœ‰è¯·æ±‚å®ç°åŠ æƒè½®è¯¢è§„åˆ™çš„è´Ÿè½½å‡è¡¡</h4> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001 weight=7</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002 weight=3</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003 weight=5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8083</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å¤„ç†è¯·æ±‚æ¦‚ç‡ï¼š9001 ç«¯å£ &gt; 9003 ç«¯å£ &gt; 9002 ç«¯å£</p> <h4 id="æ¡ˆä¾‹ä¸‰-å¯¹ç‰¹å®šèµ„æºå®ç°è´Ÿè½½å‡è¡¡"><a href="#æ¡ˆä¾‹ä¸‰-å¯¹ç‰¹å®šèµ„æºå®ç°è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> æ¡ˆä¾‹ä¸‰ï¼šå¯¹ç‰¹å®šèµ„æºå®ç°è´Ÿè½½å‡è¡¡</h4> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> videobackend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">upstream</span> filebackend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9004</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8084</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /video/</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://videobackend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token directive"><span class="token keyword">location</span> /file/</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://filebackend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>å‘é€ <code>/video/</code> è¯·æ±‚ä¼šè¢« 9001 å’Œ 9002 ç«¯å£çš„æœåŠ¡å™¨å¤„ç†ã€‚</p> <p>å‘é€ <code>/file/</code> è¯·æ±‚ä¼šè¢« 9003 å’Œ 9004 ç«¯å£çš„æœåŠ¡å™¨å¤„ç†ã€‚</p> <h4 id="æ¡ˆä¾‹å››-å¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡"><a href="#æ¡ˆä¾‹å››-å¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> æ¡ˆä¾‹å››ï¼šå¯¹ä¸åŒåŸŸåå®ç°è´Ÿè½½å‡è¡¡</h4> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> frxbackend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">upstream</span> bingbackend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9004</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span>	<span class="token number">8085</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> www.frx.com</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://frxbackend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span>	<span class="token number">8086</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> www.bing.com</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://bingbackend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><code>www.frx.com</code> åœ°å€çš„è¯·æ±‚ç”± 9001 ç«¯å£å’Œ 9002 ç«¯å£å¤„ç†ã€‚</p> <p><code>www.bing.com</code> åœ°å€çš„è¯·æ±‚ç”± 9003 ç«¯å£å’Œ 9004 ç«¯å£å¤„ç†ã€‚</p> <h4 id="æ¡ˆä¾‹äº”-å®ç°å¸¦æœ‰urlé‡å†™çš„è´Ÿè½½å‡è¡¡"><a href="#æ¡ˆä¾‹äº”-å®ç°å¸¦æœ‰urlé‡å†™çš„è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> æ¡ˆä¾‹äº”ï¼šå®ç°å¸¦æœ‰URLé‡å†™çš„è´Ÿè½½å‡è¡¡</h4> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9001</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9002</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:9003</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">listen</span>	<span class="token number">80</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">location</span> /file/</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">rewrite</span> ^(/file/.*) /server/<span class="token variable">$1</span> last</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token directive"><span class="token keyword">location</span> /server</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å°† <code>/file/xxx</code> è¯·æ±‚é‡å†™ä¸º <code>/server/xxx</code>ï¼Œç„¶åè§¦å‘ <code>location /server</code>ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p> <p>æ­¤æ—¶è¢«è´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨åœ°å€ä¹Ÿä¼šå¸¦æœ‰ <code>/server</code> ä»¥åŠåé¢çš„å‚æ•°ï¼Œå¦‚ <code>192.168.200.146:9001/server/xxx</code></p> <h2 id="å››å±‚è´Ÿè½½å‡è¡¡"><a href="#å››å±‚è´Ÿè½½å‡è¡¡" class="header-anchor">#</a> å››å±‚è´Ÿè½½å‡è¡¡</h2> <p>Nginx åœ¨ 1.9 ä¹‹åï¼Œå¢åŠ äº†ä¸€ä¸ª stream æ¨¡å—ï¼Œç”¨æ¥å®ç°å››å±‚åè®®çš„è½¬å‘ã€ä»£ç†ã€è´Ÿè½½å‡è¡¡ç­‰ã€‚stream æ¨¡å—çš„ç”¨æ³•è·Ÿ http çš„ç”¨æ³•ç±»ä¼¼ï¼Œå…è®¸æˆ‘ä»¬é…ç½®ä¸€ç»„ TCP æˆ–è€… UDP ç­‰åè®®çš„ç›‘å¬ï¼Œç„¶åé€šè¿‡ proxy_pass æ¥è½¬å‘æˆ‘ä»¬çš„è¯·æ±‚ï¼Œé€šè¿‡ upstream æ·»åŠ å¤šä¸ªåç«¯æœåŠ¡ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p> <p>å››å±‚åè®®è´Ÿè½½å‡è¡¡çš„å®ç°ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨åˆ° LVSã€HAProxyã€F5 ç­‰ï¼Œè¦ä¹ˆå¾ˆè´µè¦ä¹ˆé…ç½®å¾ˆéº»çƒ¦ï¼Œè€Œ Nginx çš„é…ç½®ç›¸å¯¹æ¥è¯´æ›´ç®€å•ï¼Œæ›´èƒ½å¿«é€Ÿå®Œæˆå·¥ä½œã€‚</p> <h3 id="æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ"><a href="#æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ" class="header-anchor">#</a> æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ</h3> <p>Nginx é»˜è®¤æ˜¯æ²¡æœ‰ç¼–è¯‘è¿™ä¸ªæ¨¡å—çš„ï¼Œéœ€è¦ä½¿ç”¨åˆ° stream æ¨¡å—ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Š <code>--with-stream</code>ã€‚</p> <p>å®Œæˆæ·»åŠ  <code>--with-stream</code> çš„å®ç°æ­¥éª¤ï¼š</p> <ul><li>å°†åŸæœ‰ <code>/usr/local/nginx/sbin/nginx</code> è¿›è¡Œå¤‡ä»½</li> <li>æ‹·è´ <code>Nginx -V</code> çš„ configure arguments é…ç½®ä¿¡æ¯</li> <li>åœ¨ Nginx çš„å®‰è£…æºç è¿›è¡Œé…ç½®æŒ‡å®šå¯¹åº”æ¨¡å—ï¼š<code>./configure --with-stream åŠ ä¸Šä¸€æ­¥æ‹·è´çš„configure arguments é…ç½®</code></li> <li>é€šè¿‡ make æ¨¡æ¿è¿›è¡Œç¼–è¯‘</li> <li>å°† objs ä¸‹é¢çš„ nginx ç§»åŠ¨åˆ° <code>/usr/local/nginx/sbin</code> ä¸‹</li> <li>åœ¨æºç ç›®å½•ä¸‹æ‰§è¡Œ <code>make upgrade</code> è¿›è¡Œå‡çº§ï¼Œè¿™ä¸ªå¯ä»¥å®ç°ä¸åœæœºæ·»åŠ æ–°æ¨¡å—çš„åŠŸèƒ½</li></ul> <p>æ·»åŠ æ¨¡å—çš„è¯¦ç»†æ­¥éª¤æˆ‘å·²ç»åœ¨ <a href="">ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç­–ç•¥-fail æŒ‡ä»¤</a>ã€<a href="/middleware/Nginx/Nginx_Static_resource_deployment/#nginxæ¨¡å—æ·»åŠ ">é™æ€èµ„æºéƒ¨ç½²-Nginx æ¨¡å—æ·»åŠ </a>ã€<a href="/middleware/Nginx/Nginx_Reverse_proxy/#æ·»åŠ sslæ”¯æŒ">åå‘ä»£ç†-æ·»åŠ sslæ”¯æŒ</a> æè¿°è¿‡ï¼Œè€Œä½ åªéœ€è¦æ›¿æ¢æ¨¡å—åå­—ç½¢äº†ã€‚</p> <h3 id="å››å±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤"><a href="#å››å±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤" class="header-anchor">#</a> å››å±‚è´Ÿè½½å‡è¡¡æŒ‡ä»¤</h3> <p>å¦‚æœä¸æƒ³åœ¨ http æ¨¡å—ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥åœ¨ steam æ¨¡å—ä½¿ç”¨ã€‚</p> <h4 id="streamæŒ‡ä»¤"><a href="#streamæŒ‡ä»¤" class="header-anchor">#</a> streamæŒ‡ä»¤</h4> <p>è¯¥æŒ‡ä»¤æä¾›åœ¨å…¶ä¸­æŒ‡å®šæµæœåŠ¡å™¨æŒ‡ä»¤çš„é…ç½®æ–‡ä»¶ä¸Šä¸‹æ–‡ã€‚å’Œ http æ¨¡å—åŒçº§ã€‚</p> <table><thead><tr><th>è¯­æ³•</th> <th>é»˜è®¤å€¼</th> <th>ä½ç½®</th></tr></thead> <tbody><tr><td>stream { ... }</td> <td>â€”</td> <td>main</td></tr></tbody></table> <p>å¦‚ï¼š</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token comment"># ......</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">stream</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:6379</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:6378</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">81</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> backend</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="upstreamæŒ‡ä»¤-2"><a href="#upstreamæŒ‡ä»¤-2" class="header-anchor">#</a> upstreamæŒ‡ä»¤</h4> <p>è¯¥æŒ‡ä»¤å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„ upstream æŒ‡ä»¤æ˜¯ç±»ä¼¼çš„ã€‚</p> <h3 id="å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹"><a href="#å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹" class="header-anchor">#</a> å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹</h3> <p>å‡†å¤‡ä¸¤å°æœåŠ¡å™¨ï¼Œè¿™é‡Œç§°ä¸º A å’Œ Bã€‚æœåŠ¡å™¨ A çš„ IP ä¸º <code>192.168.200.146</code>ï¼ŒæœåŠ¡å™¨ B çš„IP ä¸º <code>192.168.200.133</code>ï¼ŒæœåŠ¡å™¨ A å­˜æ”¾ Redis å’Œ Tomcatï¼ŒæœåŠ¡å™¨ B ä½œä¸ºè´Ÿè½½å‡è¡¡å™¨ï¼Œå¯¹æœåŠ¡å™¨ A çš„ç«¯å£è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ã€‚</p> <h4 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="header-anchor">#</a> éœ€æ±‚åˆ†æ</h4> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.6yak0csdt880.webp" alt="image"></p> <h4 id="redis-é…ç½®"><a href="#redis-é…ç½®" class="header-anchor">#</a> Redis é…ç½®</h4> <p>å‡†å¤‡ Redis æœåŠ¡å™¨,åœ¨æœåŠ¡å™¨ A ä¸Šå‡†å¤‡ä¸¤ä¸ª Redisï¼Œç«¯å£åˆ†åˆ«æ˜¯ 6379ã€6378ã€‚</p> <ol><li>ä¸Šä¼  redis çš„å®‰è£…åŒ… <code>redis-4.0.14.tar.gz</code>ï¼Œè¿™é‡Œä¸Šä¼ ç›®å½•æ˜¯ <code>/opt</code></li> <li>å°†å®‰è£…åŒ…è¿›è¡Œè§£å‹ç¼©</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">tar</span> <span class="token parameter variable">-zxf</span> redis-4.0.14.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>è¿›å…¥redisçš„å®‰è£…åŒ…</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> redis-4.0.14
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>ä½¿ç”¨ make å’Œ install è¿›è¡Œç¼–è¯‘å’Œå®‰è£…ï¼Œè¿™é‡Œçš„å®‰è£…è·¯å¾„æ˜¯ <code>/usr/local/redis/redis01</code></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/redis/redis01 <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>æ‹·è´ redis é…ç½®æ–‡ä»¶ <code>redis.conf</code> åˆ° <code>/usr/local/redis/redis01/bin</code> ç›®å½•ä¸­ï¼Œå› ä¸ºå®‰è£…åï¼Œç›®å½•å¹¶æ²¡æœ‰ redis.conf</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">cp</span> /opt/redis-4.0.14/redis.conf	/usr/local/redis/redis01/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="6"><li>ä¿®æ”¹ redis.conf é…ç½®æ–‡ä»¶ï¼Œæ³¨æ„ï¼šä¸æ˜¯æ·»åŠ å†…å®¹ï¼Œæ˜¯ä¿®æ”¹å†…å®¹ï¼Œè¦è‡ªå·±æœç´¢ bindã€port å’Œ daemonize è¿›è¡Œä¿®æ”¹</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0   <span class="token comment"># å…è®¸ä»»æ„åœ°å€è®¿é—®</span>
port  <span class="token number">6379</span>      <span class="token comment"># redis çš„ç«¯å£</span>
daemonize <span class="token function">yes</span>   <span class="token comment"># åå°å¯åŠ¨ redis</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="7"><li>å°† redis01 å¤åˆ¶ä¸€ä»½ä¸º redis02</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /usr/local/redis
<span class="token function">cp</span> <span class="token parameter variable">-r</span> redis01 redis02
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="8"><li>å°† redis02 æ–‡ä»¶å¤¹ä¸­çš„ redis.conf è¿›è¡Œä¿®æ”¹ï¼Œæ³¨æ„ï¼šä¸æ˜¯æ·»åŠ å†…å®¹ï¼Œæ˜¯ä¿®æ”¹å†…å®¹ï¼Œè¦è‡ªå·±æœç´¢ bindã€port å’Œ daemonize è¿›è¡Œä¿®æ”¹</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0   <span class="token comment"># å…è®¸ä»»æ„åœ°å€è®¿é—®</span>
port  <span class="token number">6378</span>      <span class="token comment"># redis çš„ç«¯å£</span>
daemonize <span class="token function">yes</span>   <span class="token comment"># åå°å¯åŠ¨ redis</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="9"><li>åˆ†åˆ«å¯åŠ¨ï¼Œå³å¯è·å–ä¸¤ä¸ª Redis å¹¶æŸ¥çœ‹</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä½¿ç”¨ Nginx å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„ Redis æœåŠ¡å™¨ä¸Šã€‚</p> <p>å®‰è£… Redis å¹¶éªŒè¯èƒ½å¯åŠ¨æˆåŠŸåï¼Œåœ¨å¦ä¸€å°æœåŠ¡å™¨ B <code>192.168.200.133</code> çš„ Nginx é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼šï¼ˆç¡®ä¿å®‰è£…äº† steam æ¨¡å—ï¼‰</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">stream</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">upstream</span> redisbackend</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:6379</span><span class="token punctuation">;</span>   <span class="token comment"># æœåŠ¡å™¨ B çš„ 6379 ç«¯å£</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:6378</span><span class="token punctuation">;</span>   <span class="token comment"># æœåŠ¡å™¨ B çš„ 6378 ç«¯å£</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">81</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> redisbackend</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ­¤æ—¶åˆ©ç”¨ redis-cli è¿æ¥æµ‹è¯•</p> <p><img src="https://cdn.jsdelivr.net/gh/xustudyxu/image-hosting1@master/20220804/image.cbee2u83yhs.webp" alt="image"></p> <p>æœåŠ¡å™¨ B é€šè¿‡è´Ÿè½½å‡è¡¡è¿æ¥åˆ°äº†æœåŠ¡å™¨ A çš„ Redisï¼Œåªæ˜¯ä¸çŸ¥é“è¿æ¥çš„æ˜¯ 6378 è¿˜æ˜¯ 6379 ç«¯å£ï¼Œå¯ä»¥åœ¨ Redis æ·»åŠ ä¸ä¸€æ ·çš„æ•°æ®æ¥æµ‹è¯•ï¼Œè¿™é‡Œä¸æ¼”ç¤ºäº†ã€‚</p> <h4 id="tomcat-é…ç½®"><a href="#tomcat-é…ç½®" class="header-anchor">#</a> Tomcat é…ç½®</h4> <p>å‡†å¤‡ Tomcat æœåŠ¡å™¨ åˆ°æœåŠ¡å™¨ A</p> <ol><li>ä¸Šä¼  tomcat çš„å®‰è£…åŒ…ï¼Œ<code>apache-tomcat-8.5.56.tar.gz</code></li> <li>å°†å®‰è£…åŒ…è¿›è¡Œè§£å‹ç¼©</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">tar</span> <span class="token parameter variable">-zxf</span> apache-tomcat-8.5.56.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>è¿›å…¥ tomcat çš„ bin ç›®å½•ï¼Œå¯åŠ¨ tomcat</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> apache-tomcat-8.5.56/bin
./startup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æœåŠ¡å™¨ B çš„é…ç½®æ–‡ä»¶ nginx.conf é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">stream</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">upstream</span> redisbackend</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:6379</span><span class="token punctuation">;</span>    <span class="token comment"># æœåŠ¡å™¨ B çš„ 6379 ç«¯å£</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:6378</span><span class="token punctuation">;</span>    <span class="token comment"># æœåŠ¡å™¨ B çš„ 6378 ç«¯å£</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">upstream</span> tomcatbackend</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:8080</span><span class="token punctuation">;</span>   <span class="token comment"># æœåŠ¡å™¨ B çš„ 8080 ç«¯å£</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>  <span class="token number">81</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> redisbackend</span><span class="token punctuation">;</span> <span class="token comment"># redis çš„è´Ÿè½½å‡è¡¡</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>	<span class="token number">82</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> tomcatbackend</span><span class="token punctuation">;</span>  <span class="token comment"># tomcat çš„è´Ÿè½½å‡è¡¡</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>è®¿é—®æœåŠ¡å™¨ B çš„åœ°å€è¿›è¡Œæµ‹è¯•ï¼š<code>192.168.200.133:82</code>ã€‚</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xustudyxu/xustudyxu.github.io/edit/master/docs/studynotes/middleware/Nginx/Nginx_load_balancing.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘æ”¹å–„æ­¤é¡µé¢</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Nginx" title="æ ‡ç­¾">#Nginx</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2024å¹´3æœˆ20æ—¥</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/middleware/Nginx/Nginx_Reverse_proxy/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Nginx åå‘ä»£ç†</div></a> <a href="/middleware/Nginx/Nginx_Cache_integration/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Nginx ç¼“å­˜é›†æˆ</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/middleware/Nginx/Nginx_Reverse_proxy/" class="prev">Nginx åå‘ä»£ç†</a></span> <span class="next"><a href="/middleware/Nginx/Nginx_Cache_integration/">Nginx ç¼“å­˜é›†æˆ</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c538d4/"><div>
            ç»“æ„å‹æ¨¡å¼
            <!----></div></a> <span class="date">03-21</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/9f3d5d/"><div>
            åˆ›å»ºè€…æ¨¡å¼
            <!----></div></a> <span class="date">01-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/57297b/"><div>
            è®¾è®¡æ¨¡å¼å…¥é—¨
            <!----></div></a> <span class="date">12-30</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1812903531@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xustudyxu" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://frxcat.fun/img/wx.png" title="å¾®ä¿¡" target="_blank" class="iconfont icon-weixin"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2021-2024
    <span>xustudyxu |<a href="https://beian.miit.gov.cn" target="_blank">è±«ICPå¤‡2022008983å·</a><br>	<img src="http://www.beian.gov.cn/img/new/gongan.png" border="0" /></a>	 		<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41018302000331" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px;">è±«å…¬ç½‘å®‰å¤‡ 41018302000331å·</p></a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><div></div><div id="tcomment"></div><!----></div></div>
    <script src="/assets/js/app.e21ab9c9.js" defer></script><script src="/assets/js/4.cffb820d.js" defer></script><script src="/assets/js/3.383238d8.js" defer></script><script src="/assets/js/2.6525d697.js" defer></script><script src="/assets/js/317.b0922aa5.js" defer></script><script src="/assets/js/21.2df8275d.js" defer></script><script src="/assets/js/44.80524cab.js" defer></script><script src="/assets/js/26.19fe0195.js" defer></script><script src="/assets/js/27.70e16e58.js" defer></script>
  </body>
</html>
